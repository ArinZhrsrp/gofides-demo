<!doctype html>
<html lang="en" class="h-full">
  <head>
    <meta charset="UTF-8" />
    <!-- âœ… Mobileâ€‘friendly viewport -->
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.5, user-scalable=yes"
    />
    <title>goFides CRM Dashboard Â· premium sidebar final</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="/_sdk/element_sdk.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&amp;display=swap"
      rel="stylesheet"
    />
    <style>
      /* ----- DARK MODE + PREMIUM SIDEBAR (your exact design) + LOGOUT BUTTON ADDED ----- */
      body {
        box-sizing: border-box;
        font-family: "Inter", sans-serif;
        margin: 0;
      }
      * {
        box-sizing: border-box;
      }

      :root {
        --bg-primary: #0f172a;
        --bg-secondary: #1e293b;
        --bg-card: #1e293b;
        --text-primary: #f1f5f9;
        --text-secondary: #94a3b8;
        --accent-indigo: #6366f1;
        --accent-emerald: #10b981;
        --accent-amber: #f59e0b;
        --accent-rose: #f43f5e;
        --border-color: #334155;
        --sidebar-gradient: linear-gradient(180deg, #0b1020 0%, #020617 100%);
      }

      /* custom scroll â€“ dark friendly */
      ::-webkit-scrollbar {
        width: 6px;
        height: 6px;
      }
      ::-webkit-scrollbar-track {
        background: #1e293b;
      }
      ::-webkit-scrollbar-thumb {
        background: #475569;
        border-radius: 3px;
      }
      ::-webkit-scrollbar-thumb:hover {
        background: #64748b;
      }

      /* ---------- YOUR EXACT SIDEBAR DESIGN ---------- */
      .premium-sidebar {
        width: 280px;
        background: linear-gradient(180deg, #0b1020, #020617);
        color: #fff;
        display: flex;
        flex-direction: column;
        height: 100%;
        border-right: 1px solid rgba(255, 255, 255, 0.03);
      }

      .brand {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 20px;
        border-bottom: 1px solid rgba(255, 255, 255, 0.05);
      }

      .logo {
        width: 44px;
        height: 44px;
        border-radius: 14px;
        background: linear-gradient(135deg, #7c3aed, #a78bfa);
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 800;
        font-size: 22px;
        color: white;
      }

      .brand-text h1 {
        font-size: 18px;
        margin: 0;
        font-weight: 600;
        color: white;
      }

      .brand-text p {
        margin: 0;
        font-size: 12px;
        color: #94a3b8;
      }

      .menu {
        flex: 1;
        overflow-y: auto;
        padding: 12px;
      }

      .section {
        margin-top: 18px;
        font-size: 11px;
        color: #64748b;
        letter-spacing: 1px;
        text-transform: uppercase;
        font-weight: 600;
        padding: 0 8px;
      }

      .item {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 12px 14px;
        border-radius: 12px;
        color: #cbd5f5;
        text-decoration: none;
        margin-top: 6px;
        font-size: 13px;
        font-weight: 500;
        transition: all 0.15s ease;
        border: none;
        background: transparent;
        width: 100%;
        text-align: left;
        cursor: pointer;
      }

      .item.active {
        background: #8b5cf6;
        color: #fff;
      }

      .item:hover {
        background: rgba(139, 92, 246, 0.15);
        color: white;
      }

      .sub {
        margin-left: 36px;
        font-size: 13px;
        color: #94a3b8;
        margin-top: 4px;
        padding: 8px 14px;
        border-radius: 10px;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .sub:hover {
        background: rgba(139, 92, 246, 0.1);
        color: #e2e8f0;
      }

      .footer {
        padding: 16px;
        border-top: 1px solid rgba(255, 255, 255, 0.05);
        display: flex;
        align-items: center;
        gap: 12px;
      }

      .avatar {
        width: 36px;
        height: 36px;
        border-radius: 50%;
        background: #22c55e;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 700;
        color: #022c22;
        font-size: 14px;
      }

      /* chevron style */
      .chevron {
        margin-left: auto;
        transition: transform 0.2s;
      }

      /* logout button style */
      .logout-btn {
        margin-left: auto;
        background: transparent;
        border: none;
        color: #94a3b8;
        padding: 6px;
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.15s ease;
      }
      .logout-btn:hover {
        background: rgba(239, 68, 68, 0.2);
        color: #f87171;
      }
      .logout-btn svg {
        width: 18px;
        height: 18px;
        stroke-width: 1.5;
      }

      /* ---------- MOBILE DRAWER SYSTEM ---------- */
      @media (max-width: 1023px) {
        .flex.h-full.w-full {
          position: relative;
          flex-wrap: wrap;
        }
        aside.premium-sidebar {
          position: fixed !important;
          top: 0;
          left: 0;
          width: 280px !important;
          max-width: 85%;
          height: 100vh !important;
          z-index: 1000;
          background: linear-gradient(180deg, #0b1020, #020617) !important;
          box-shadow: 0 0 30px rgba(0, 0, 0, 0.7);
          transition:
            transform 0.3s ease,
            box-shadow 0.3s ease;
          transform: translateX(-100%);
          border-right: 1px solid #1e293b;
          display: flex;
          flex-direction: column;
        }
        aside.premium-sidebar.drawer-open {
          transform: translateX(0);
          box-shadow: 0 10px 40px rgba(0, 0, 0, 0.8);
        }
        main.flex-1 {
          width: 100%;
          flex: 0 0 100%;
        }
        .drawer-overlay {
          position: fixed;
          top: 0;
          left: 0;
          width: 100vw;
          height: 100vh;
          background-color: rgba(0, 0, 0, 0.7);
          backdrop-filter: blur(2px);
          z-index: 999;
          display: none;
        }
        .drawer-overlay.active {
          display: block;
        }
        .mobile-menu-btn {
          display: block !important;
          margin-right: 8px;
          background: #1e293b;
          border: 1px solid #334155;
          border-radius: 8px;
          padding: 8px 10px;
          color: #e2e8f0;
        }
        .mobile-menu-btn:hover {
          background: #2d3a4f;
        }
        .grid-cols-4,
        .grid-cols-2,
        .grid-cols-12 {
          grid-template-columns: 1fr !important;
        }
        .col-span-3,
        .col-span-4,
        .col-span-6,
        .col-span-12 {
          grid-column: span 1 / span 1 !important;
        }
      }
      @media (min-width: 1024px) {
        aside.premium-sidebar {
          transform: none !important;
          position: relative !important;
          width: 280px !important;
          height: 100% !important;
          box-shadow: none;
        }
        .drawer-overlay {
          display: none !important;
        }
        .mobile-menu-btn {
          display: none !important;
        }
      }
      .mobile-menu-btn {
        display: none;
        background: #1e293b;
        border: 1px solid #334155;
        border-radius: 8px;
        padding: 8px 10px;
        color: #e2e8f0;
        transition: all 0.15s ease;
      }

      /* ---------- DASHBOARD STYLES (fully preserved) ---------- */
      .kpi-card {
        background: var(--bg-card);
        border: 1px solid var(--border-color);
        border-radius: 18px;
        padding: 20px 20px 18px;
        position: relative;
        overflow: hidden;
        box-shadow: 0 0 0 1px rgba(255, 255, 255, 0.05) inset;
      }
      .kpi-card::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 6px;
        background: linear-gradient(
          90deg,
          var(--accent-indigo),
          rgba(99, 102, 241, 0.4),
          rgba(99, 102, 241, 0.15)
        );
      }
      .kpi-card.emerald::before {
        background: linear-gradient(
          90deg,
          var(--accent-emerald),
          #34d399,
          rgba(16, 185, 129, 0.15)
        );
      }
      .kpi-card.amber::before {
        background: linear-gradient(
          90deg,
          var(--accent-amber),
          #fbbf24,
          rgba(245, 158, 11, 0.15)
        );
      }
      .kpi-card.rose::before {
        background: linear-gradient(
          90deg,
          var(--accent-rose),
          #fb7185,
          rgba(244, 63, 94, 0.15)
        );
      }

      .members-title {
        font-size: 13px;
        letter-spacing: 1px;
        text-transform: uppercase;
        color: #a78bfa;
        font-weight: 600;
      }
      .members-count {
        font-size: 40px;
        font-weight: 700;
        line-height: 1.1;
        margin-top: 8px;
        margin-bottom: 6px;
        color: white;
      }
      .growth-badge {
        display: flex;
        align-items: center;
        font-size: 14px;
        gap: 6px;
      }
      .growth-badge span {
        color: #22c55e;
        font-weight: 600;
      }
      .growth-badge small {
        color: #94a3b8;
        font-weight: 400;
        font-size: 13px;
      }
      .icon-circle {
        width: 48px;
        height: 48px;
        border-radius: 12px;
        background: linear-gradient(135deg, #334155, #1e293b);
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 22px;
        color: white;
      }
      .bar-row {
        display: flex;
        gap: 8px;
        margin-top: 20px;
        width: 100%;
      }
      .stat-bar {
        flex: 1;
        height: 28px;
        background: linear-gradient(180deg, #4ade80, #22c55e);
        border-radius: 6px;
      }
      .sparkline {
        height: 32px;
        display: flex;
        align-items: end;
        gap: 2px;
        margin-top: 12px;
      }
      .sparkline-bar {
        flex: 1;
        background: rgba(99, 102, 241, 0.3);
        border-radius: 2px 2px 0 0;
        transition: all 0.2s ease;
      }
      .chart-card {
        background: var(--bg-card);
        border: 1px solid var(--border-color);
        border-radius: 12px;
        padding: 20px;
      }
      .donut-container {
        position: relative;
        width: 140px;
        height: 140px;
        margin: 0 auto;
      }
      .time-toggle {
        display: flex;
        background: var(--bg-secondary);
        border-radius: 8px;
        padding: 3px;
        gap: 2px;
      }
      .time-toggle button {
        padding: 6px 14px;
        font-size: 12px;
        font-weight: 500;
        border-radius: 6px;
        color: var(--text-secondary);
        transition: all 0.15s ease;
      }
      .time-toggle button.active {
        background: var(--accent-indigo);
        color: white;
      }
      .metric-badge {
        display: inline-flex;
        align-items: center;
        gap: 4px;
        padding: 2px 8px;
        border-radius: 12px;
        font-size: 11px;
        font-weight: 500;
      }
      .metric-badge.up {
        background: rgba(16, 185, 129, 0.15);
        color: var(--accent-emerald);
      }
      .avatar-small {
        width: 32px;
        height: 32px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 600;
        font-size: 12px;
        color: white;
      }
      .legend-item {
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 12px;
        color: var(--text-secondary);
      }
      .legend-dot {
        width: 10px;
        height: 10px;
        border-radius: 50%;
      }
      .badge {
        display: inline-flex;
        align-items: center;
        padding: 2px 8px;
        border-radius: 9999px;
        font-size: 11px;
        font-weight: 500;
      }
      .table-row:hover {
        background: #263445;
      }
      .hidden {
        display: none !important;
      }
    </style>
    <style>
      @view-transition {
        navigation: auto;
      }
    </style>
    <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  </head>
  <body class="h-full bg-slate-900 text-slate-100 overflow-hidden">
    <!-- Drawer overlay -->
    <div
      id="drawerOverlay"
      class="drawer-overlay"
      onclick="closeSidebar()"
    ></div>

    <div class="flex h-full w-full">
      <!-- =============== PREMIUM SIDEBAR â€“ LOGOUT REDIRECT UPDATED ============= -->
      <aside id="mainSidebar" class="premium-sidebar">
        <!-- Brand / Logo -->
        <div class="brand">
          <div class="logo">â—Ž</div>
          <div class="brand-text">
            <h1 id="company-name">goFides</h1>
            <p>Loyalty Platform</p>
          </div>
        </div>

        <!-- Navigation Menu â€“ Referrals removed, all other updates applied -->
        <div class="menu">
          <!-- Dashboard -->
          <a class="item active" href="#dashboard">
            <span>Dashboard</span>
          </a>

          <!-- CUSTOMERS section -->
          <div class="section">CUSTOMERS</div>
          <!-- Member Directory â†’ Customer List and Referrals (relabeled) -->
          <a class="item" href="#members">Customer List and Referrals</a>
          <a class="item" href="#customer-group">Customer Group</a>

          <!-- OPERATIONS section -->
          <div class="section">OPERATIONS</div>
          <a class="item" href="#redemptions">Redemptions</a>
          <a class="item" href="#transactions">Transactions</a>

          <!-- ENGAGEMENT section â€“ Referrals removed -->
          <div class="section">ENGAGEMENT</div>
          <a class="item" href="#campaigns">Campaigns</a>
          <a class="item" href="#rewards">Rewards Catalog</a>
          <a class="item" href="#ledgers">Point Ledgers</a>

          <!-- Campaign Mechanics with toggle -->
          <a
            class="item"
            id="cm-toggle"
            onclick="toggleSubmenu('cm-sub', 'cm-chevron')"
          >
            Campaign Mechanics
            <span class="chevron" id="cm-chevron">â–¾</span>
          </a>
          <div id="cm-sub" class="hidden">
            <div class="sub">â€¢ Preset List</div>
            <div class="sub">â€¢ Custom Integration List</div>
          </div>

          <!-- STRATEGY section -->
          <div class="section">STRATEGY</div>
          <a class="item" href="#tiers">Program Tiers</a>
          <a class="item" href="#audiences">Audiences</a>
          <a class="item" href="#touchpoints">Touchpoints</a>

          <!-- ADMINISTRATION section -->
          <div class="section">ADMINISTRATION</div>

          <!-- System Settings with submenu -->
          <a
            class="item"
            id="settings-toggle"
            onclick="toggleSubmenu('settings-sub', 'settings-chevron')"
          >
            System Settings
            <span class="chevron" id="settings-chevron">â–¾</span>
          </a>
          <div id="settings-sub" class="hidden">
            <div class="sub">â€¢ Account Rules</div>
            <div class="sub">â€¢ Referral Logic</div>
            <div class="sub">â€¢ Points Policy</div>
          </div>

          <!-- Team Access with submenu (Staff List â†’ Member List) -->
          <a
            class="item"
            id="team-toggle"
            onclick="toggleSubmenu('team-sub', 'team-chevron')"
          >
            Team Access
            <span class="chevron" id="team-chevron">â–¾</span>
          </a>
          <div id="team-sub" class="hidden">
            <div class="sub">â€¢ Member List</div>
            <div class="sub">â€¢ Permissions</div>
          </div>

          <!-- Developer Only with submenu -->
          <a
            class="item"
            id="developer-toggle"
            onclick="toggleSubmenu('developer-sub', 'developer-chevron')"
          >
            Developer Only
            <span class="chevron" id="developer-chevron">â–¾</span>
          </a>
          <div id="developer-sub" class="hidden">
            <div class="sub">â€¢ Custom Integration</div>
          </div>
        </div>

        <!-- Footer / User Profile â€“ LOGOUT BUTTON now redirects to Register/login.html -->
        <div class="footer">
          <div class="avatar">JD</div>
          <div style="flex: 1; min-width: 0">
            <strong
              style="
                color: white;
                font-size: 14px;
                display: block;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
              "
              >John Doe</strong
            >
            <small
              style="
                color: #94a3b8;
                font-size: 12px;
                display: block;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
              "
              >Administrator</small
            >
          </div>
          <!-- âœ… REDIRECT UPDATED: now points to Register/login.html -->
          <button
            class="logout-btn"
            onclick="
              window.location.href = '/gofides/darkmode/register/login.html'
            "
            title="Logout"
          >
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4" />
              <polyline points="16 17 21 12 16 7" />
              <line x1="21" y1="12" x2="9" y2="12" />
            </svg>
          </button>
        </div>
      </aside>

      <!-- =============== MAIN CONTENT â€“ DARK DASHBOARD (fully preserved) ============= -->
      <main class="flex-1 flex flex-col h-full overflow-hidden bg-slate-900">
        <!-- Header -->
        <div
          class="flex-shrink-0 border-b border-slate-700 bg-slate-800/50 backdrop-blur-sm px-4 md:px-6 py-4"
        >
          <div class="flex flex-wrap items-center justify-between gap-4">
            <!-- Left side: mobile menu button + title -->
            <div class="flex items-center gap-2">
              <button
                id="mobileMenuBtn"
                class="mobile-menu-btn"
                onclick="openSidebar()"
                aria-label="Open menu"
              >
                <svg
                  class="w-5 h-5 text-slate-300"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <line x1="3" y1="12" x2="21" y2="12"></line>
                  <line x1="3" y1="6" x2="21" y2="6"></line>
                  <line x1="3" y1="18" x2="21" y2="18"></line>
                </svg>
              </button>
              <div>
                <h1 id="dashboard-title" class="text-2xl font-bold text-white">
                  Executive Dashboard
                </h1>
                <p class="text-sm text-slate-400 mt-1">
                  Real-time loyalty program intelligence
                </p>
              </div>
            </div>
            <!-- Right side: time toggle + buttons -->
            <div class="flex items-center flex-wrap gap-3">
              <div class="time-toggle" id="time-toggle">
                <button class="active" data-period="daily">Daily</button>
                <button data-period="monthly">Monthly</button>
                <button data-period="ytd">Year-to-Date</button>
              </div>
              <button
                class="flex items-center gap-2 px-4 py-2 bg-slate-800 border border-slate-600 rounded-lg text-sm font-medium text-slate-200 hover:bg-slate-700 transition-colors"
              >
                <svg
                  class="w-4 h-4"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                  <polyline points="7 10 12 15 17 10" />
                  <line x1="12" y1="15" x2="12" y2="3" />
                </svg>
                Export
              </button>
              <button
                class="flex items-center gap-2 px-4 py-2 bg-indigo-600 rounded-lg text-sm font-medium text-white hover:bg-indigo-500 transition-colors"
              >
                <svg
                  class="w-4 h-4"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <line x1="12" y1="5" x2="12" y2="19" />
                  <line x1="5" y1="12" x2="19" y2="12" />
                </svg>
                New Campaign
              </button>
            </div>
          </div>
        </div>

        <!-- DASHBOARD CONTENT â€“ FULLY PRESERVED (exactly as original) -->
        <div class="flex-1 overflow-y-auto p-6 space-y-6">
          <!-- KPI ROW -->
          <div class="grid grid-cols-4 gap-4">
            <!-- TOTAL MEMBERS -->
            <div class="kpi-card" style="border-radius: 18px">
              <div class="flex items-start justify-between">
                <div>
                  <div class="members-title">Total Members</div>
                  <div class="members-count" id="kpi-members">24,847</div>
                  <div class="growth-badge">
                    <span>â†— +12.5%</span>
                    <small>vs last period</small>
                  </div>
                </div>
                <div class="icon-circle">ðŸ‘¥</div>
              </div>
              <div class="bar-row">
                <div class="stat-bar"></div>
                <div class="stat-bar"></div>
                <div class="stat-bar"></div>
                <div class="stat-bar"></div>
                <div class="stat-bar"></div>
                <div class="stat-bar"></div>
                <div class="stat-bar"></div>
                <div class="stat-bar"></div>
                <div class="stat-bar"></div>
                <div class="stat-bar"></div>
              </div>
            </div>
            <!-- Total Points Issued -->
            <div class="kpi-card emerald">
              <div class="flex items-start justify-between">
                <div>
                  <p
                    class="text-xs font-medium text-slate-400 uppercase tracking-wide"
                  >
                    Total Points Issued
                  </p>
                  <p class="text-2xl font-bold text-white mt-1" id="kpi-points">
                    1.24M
                  </p>
                  <div class="flex items-center gap-2 mt-1">
                    <span class="metric-badge up"
                      ><svg
                        class="w-3 h-3"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M5 10l7-7m0 0l7 7m-7-7v18"
                        /></svg
                      >8.3%</span
                    >
                    <span class="text-xs text-slate-500">vs last period</span>
                  </div>
                </div>
                <div class="p-2 rounded-lg bg-emerald-500/20">
                  <svg
                    class="w-5 h-5 text-emerald-400"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="1.5"
                      d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
                    />
                  </svg>
                </div>
              </div>
              <div class="sparkline">
                <div
                  class="sparkline-bar"
                  style="height: 50%; background: rgba(16, 185, 129, 0.3)"
                ></div>
                <div
                  class="sparkline-bar"
                  style="height: 65%; background: rgba(16, 185, 129, 0.3)"
                ></div>
                <div
                  class="sparkline-bar"
                  style="height: 45%; background: rgba(16, 185, 129, 0.3)"
                ></div>
                <div
                  class="sparkline-bar"
                  style="height: 75%; background: rgba(16, 185, 129, 0.3)"
                ></div>
                <div
                  class="sparkline-bar"
                  style="height: 85%; background: rgba(16, 185, 129, 0.3)"
                ></div>
                <div
                  class="sparkline-bar"
                  style="height: 70%; background: rgba(16, 185, 129, 0.3)"
                ></div>
                <div
                  class="sparkline-bar"
                  style="height: 95%; background: rgba(16, 185, 129, 0.3)"
                ></div>
              </div>
            </div>
            <!-- Total Channels -->
            <div class="kpi-card amber">
              <div class="flex items-start justify-between">
                <div>
                  <p
                    class="text-xs font-medium text-slate-400 uppercase tracking-wide"
                  >
                    Total Channels
                  </p>
                  <p
                    class="text-2xl font-bold text-white mt-1"
                    id="kpi-channels"
                  >
                    12
                  </p>
                  <div class="flex items-center gap-2 mt-1">
                    <span class="metric-badge up"
                      ><svg
                        class="w-3 h-3"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M5 10l7-7m0 0l7 7m-7-7v18"
                        /></svg
                      >2 new</span
                    >
                    <span class="text-xs text-slate-500">this month</span>
                  </div>
                </div>
                <div class="p-2 rounded-lg bg-amber-500/20">
                  <svg
                    class="w-5 h-5 text-amber-400"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="1.5"
                      d="M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"
                    />
                  </svg>
                </div>
              </div>
              <div class="sparkline">
                <div
                  class="sparkline-bar"
                  style="height: 70%; background: rgba(245, 158, 11, 0.3)"
                ></div>
                <div
                  class="sparkline-bar"
                  style="height: 70%; background: rgba(245, 158, 11, 0.3)"
                ></div>
                <div
                  class="sparkline-bar"
                  style="height: 70%; background: rgba(245, 158, 11, 0.3)"
                ></div>
                <div
                  class="sparkline-bar"
                  style="height: 80%; background: rgba(245, 158, 11, 0.3)"
                ></div>
                <div
                  class="sparkline-bar"
                  style="height: 80%; background: rgba(245, 158, 11, 0.3)"
                ></div>
                <div
                  class="sparkline-bar"
                  style="height: 90%; background: rgba(245, 158, 11, 0.3)"
                ></div>
                <div
                  class="sparkline-bar"
                  style="height: 100%; background: rgba(245, 158, 11, 0.3)"
                ></div>
              </div>
            </div>
            <!-- Total Revenue -->
            <div class="kpi-card rose">
              <div class="flex items-start justify-between">
                <div>
                  <p
                    class="text-xs font-medium text-slate-400 uppercase tracking-wide"
                  >
                    Total Revenue
                  </p>
                  <p
                    class="text-2xl font-bold text-white mt-1"
                    id="kpi-revenue"
                  >
                    $892K
                  </p>
                  <div class="flex items-center gap-2 mt-1">
                    <span class="metric-badge up"
                      ><svg
                        class="w-3 h-3"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M5 10l7-7m0 0l7 7m-7-7v18"
                        /></svg
                      >23.1%</span
                    >
                    <span class="text-xs text-slate-500">vs last period</span>
                  </div>
                </div>
                <div class="p-2 rounded-lg bg-rose-500/20">
                  <svg
                    class="w-5 h-5 text-rose-400"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="1.5"
                      d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"
                    />
                  </svg>
                </div>
              </div>
              <div class="sparkline">
                <div
                  class="sparkline-bar"
                  style="height: 40%; background: rgba(244, 63, 94, 0.3)"
                ></div>
                <div
                  class="sparkline-bar"
                  style="height: 55%; background: rgba(244, 63, 94, 0.3)"
                ></div>
                <div
                  class="sparkline-bar"
                  style="height: 45%; background: rgba(244, 63, 94, 0.3)"
                ></div>
                <div
                  class="sparkline-bar"
                  style="height: 65%; background: rgba(244, 63, 94, 0.3)"
                ></div>
                <div
                  class="sparkline-bar"
                  style="height: 75%; background: rgba(244, 63, 94, 0.3)"
                ></div>
                <div
                  class="sparkline-bar"
                  style="height: 85%; background: rgba(244, 63, 94, 0.3)"
                ></div>
                <div
                  class="sparkline-bar"
                  style="height: 100%; background: rgba(244, 63, 94, 0.3)"
                ></div>
              </div>
            </div>
          </div>

          <!-- Performance Comparison Row -->
          <div class="grid grid-cols-2 gap-4">
            <!-- Top 10 High-Point Earners -->
            <div class="chart-card">
              <div class="flex items-center justify-between mb-4">
                <h3 class="text-sm font-semibold text-white">
                  Top 10 High-Point Earners
                </h3>
                <button
                  class="text-xs text-indigo-400 hover:text-indigo-300 font-medium"
                >
                  View All
                </button>
              </div>
              <div class="space-y-1">
                <div
                  class="grid grid-cols-[32px_1fr_80px_60px] gap-3 text-xs text-slate-400 font-medium pb-2 border-b border-slate-700 items-center"
                >
                  <span></span> <span>Member</span>
                  <span class="text-right">Points</span>
                  <span class="text-right">Tier</span>
                </div>
                <div
                  class="grid grid-cols-[32px_1fr_80px_60px] gap-3 items-center py-2.5 border-b border-slate-700/50"
                >
                  <div
                    class="avatar-small bg-gradient-to-br from-violet-500 to-purple-600"
                  >
                    SM
                  </div>
                  <div>
                    <p class="text-sm font-medium text-white">Sarah Mitchell</p>
                    <p class="text-xs text-slate-500">sarah@email.com</p>
                  </div>
                  <p class="text-sm font-semibold text-emerald-400 text-right">
                    48,520
                  </p>
                  <span
                    class="text-xs px-2 py-0.5 rounded-full bg-amber-500/20 text-amber-400 text-center"
                    >Gold</span
                  >
                </div>
                <div
                  class="grid grid-cols-[32px_1fr_80px_60px] gap-3 items-center py-2.5 border-b border-slate-700/50"
                >
                  <div
                    class="avatar-small bg-gradient-to-br from-blue-500 to-cyan-600"
                  >
                    JC
                  </div>
                  <div>
                    <p class="text-sm font-medium text-white">James Chen</p>
                    <p class="text-xs text-slate-500">james@email.com</p>
                  </div>
                  <p class="text-sm font-semibold text-emerald-400 text-right">
                    42,180
                  </p>
                  <span
                    class="text-xs px-2 py-0.5 rounded-full bg-slate-500/20 text-slate-300 text-center"
                    >Platinum</span
                  >
                </div>
                <div
                  class="grid grid-cols-[32px_1fr_80px_60px] gap-3 items-center py-2.5 border-b border-slate-700/50"
                >
                  <div
                    class="avatar-small bg-gradient-to-br from-emerald-500 to-teal-600"
                  >
                    EP
                  </div>
                  <div>
                    <p class="text-sm font-medium text-white">Emma Parker</p>
                    <p class="text-xs text-slate-500">emma@email.com</p>
                  </div>
                  <p class="text-sm font-semibold text-emerald-400 text-right">
                    38,940
                  </p>
                  <span
                    class="text-xs px-2 py-0.5 rounded-full bg-amber-500/20 text-amber-400 text-center"
                    >Gold</span
                  >
                </div>
                <div
                  class="grid grid-cols-[32px_1fr_80px_60px] gap-3 items-center py-2.5 border-b border-slate-700/50"
                >
                  <div
                    class="avatar-small bg-gradient-to-br from-rose-500 to-pink-600"
                  >
                    MJ
                  </div>
                  <div>
                    <p class="text-sm font-medium text-white">
                      Michael Johnson
                    </p>
                    <p class="text-xs text-slate-500">michael@email.com</p>
                  </div>
                  <p class="text-sm font-semibold text-emerald-400 text-right">
                    35,210
                  </p>
                  <span
                    class="text-xs px-2 py-0.5 rounded-full bg-amber-500/20 text-amber-400 text-center"
                    >Gold</span
                  >
                </div>
                <div
                  class="grid grid-cols-[32px_1fr_80px_60px] gap-3 items-center py-2.5"
                >
                  <div
                    class="avatar-small bg-gradient-to-br from-orange-500 to-amber-600"
                  >
                    LW
                  </div>
                  <div>
                    <p class="text-sm font-medium text-white">Lisa Wang</p>
                    <p class="text-xs text-slate-500">lisa@email.com</p>
                  </div>
                  <p class="text-sm font-semibold text-emerald-400 text-right">
                    31,890
                  </p>
                  <span
                    class="text-xs px-2 py-0.5 rounded-full bg-zinc-500/20 text-zinc-400 text-center"
                    >Silver</span
                  >
                </div>
              </div>
            </div>
            <!-- Top 10 Most Redeemed Rewards -->
            <div class="chart-card">
              <div class="flex items-center justify-between mb-4">
                <h3 class="text-sm font-semibold text-white">
                  Top 10 Most Redeemed Rewards
                </h3>
                <button
                  class="text-xs text-indigo-400 hover:text-indigo-300 font-medium"
                >
                  View All
                </button>
              </div>
              <div class="space-y-1">
                <div
                  class="grid grid-cols-[24px_1fr_70px_70px] gap-3 text-xs text-slate-400 font-medium pb-2 border-b border-slate-700 items-center"
                >
                  <span>#</span> <span>Reward</span>
                  <span class="text-right">Redeemed</span>
                  <span class="text-right">Points</span>
                </div>
                <div
                  class="grid grid-cols-[24px_1fr_70px_70px] gap-3 items-center py-2.5 border-b border-slate-700/50"
                >
                  <span class="text-xs font-bold text-indigo-400">01</span>
                  <div>
                    <p class="text-sm font-medium text-white">
                      $50 Store Credit
                    </p>
                    <p class="text-xs text-slate-500">Gift Card</p>
                  </div>
                  <p class="text-sm font-semibold text-white text-right">
                    2,847
                  </p>
                  <p class="text-xs text-slate-400 text-right">5,000</p>
                </div>
                <div
                  class="grid grid-cols-[24px_1fr_70px_70px] gap-3 items-center py-2.5 border-b border-slate-700/50"
                >
                  <span class="text-xs font-bold text-indigo-400">02</span>
                  <div>
                    <p class="text-sm font-medium text-white">Free Shipping</p>
                    <p class="text-xs text-slate-500">Perk</p>
                  </div>
                  <p class="text-sm font-semibold text-white text-right">
                    2,156
                  </p>
                  <p class="text-xs text-slate-400 text-right">1,500</p>
                </div>
                <div
                  class="grid grid-cols-[24px_1fr_70px_70px] gap-3 items-center py-2.5 border-b border-slate-700/50"
                >
                  <span class="text-xs font-bold text-indigo-400">03</span>
                  <div>
                    <p class="text-sm font-medium text-white">20% Off Coupon</p>
                    <p class="text-xs text-slate-500">Discount</p>
                  </div>
                  <p class="text-sm font-semibold text-white text-right">
                    1,943
                  </p>
                  <p class="text-xs text-slate-400 text-right">3,000</p>
                </div>
                <div
                  class="grid grid-cols-[24px_1fr_70px_70px] gap-3 items-center py-2.5 border-b border-slate-700/50"
                >
                  <span class="text-xs font-bold text-indigo-400">04</span>
                  <div>
                    <p class="text-sm font-medium text-white">
                      $100 Store Credit
                    </p>
                    <p class="text-xs text-slate-500">Gift Card</p>
                  </div>
                  <p class="text-sm font-semibold text-white text-right">
                    1,287
                  </p>
                  <p class="text-xs text-slate-400 text-right">9,000</p>
                </div>
                <div
                  class="grid grid-cols-[24px_1fr_70px_70px] gap-3 items-center py-2.5"
                >
                  <span class="text-xs font-bold text-indigo-400">05</span>
                  <div>
                    <p class="text-sm font-medium text-white">
                      Exclusive Merch
                    </p>
                    <p class="text-xs text-slate-500">Product</p>
                  </div>
                  <p class="text-sm font-semibold text-white text-right">984</p>
                  <p class="text-xs text-slate-400 text-right">7,500</p>
                </div>
              </div>
            </div>
          </div>

          <!-- Distribution Hub & Metrics Row -->
          <div class="grid grid-cols-4 gap-4">
            <!-- Members by Tiers Donut -->
            <div class="chart-card">
              <h3 class="text-sm font-semibold text-white mb-4">
                Members by Tiers
              </h3>
              <div class="donut-container">
                <svg viewBox="0 0 100 100" class="w-full h-full">
                  <circle
                    cx="50"
                    cy="50"
                    r="40"
                    fill="none"
                    stroke="#334155"
                    stroke-width="12"
                  />
                  <circle
                    cx="50"
                    cy="50"
                    r="40"
                    fill="none"
                    stroke="#94a3b8"
                    stroke-width="12"
                    stroke-dasharray="113.1 251.33"
                    stroke-dashoffset="0"
                    transform="rotate(-90 50 50)"
                  />
                  <circle
                    cx="50"
                    cy="50"
                    r="40"
                    fill="none"
                    stroke="#f59e0b"
                    stroke-width="12"
                    stroke-dasharray="75.4 251.33"
                    stroke-dashoffset="-113.1"
                    transform="rotate(-90 50 50)"
                  />
                  <circle
                    cx="50"
                    cy="50"
                    r="40"
                    fill="none"
                    stroke="#a78bfa"
                    stroke-width="12"
                    stroke-dasharray="37.7 251.33"
                    stroke-dashoffset="-188.5"
                    transform="rotate(-90 50 50)"
                  />
                  <circle
                    cx="50"
                    cy="50"
                    r="40"
                    fill="none"
                    stroke="#22d3ee"
                    stroke-width="12"
                    stroke-dasharray="25.13 251.33"
                    stroke-dashoffset="-226.2"
                    transform="rotate(-90 50 50)"
                  />
                  <text
                    x="50"
                    y="47"
                    text-anchor="middle"
                    class="fill-white text-lg font-bold"
                    style="font-size: 12px"
                  >
                    24.8K
                  </text>
                  <text
                    x="50"
                    y="58"
                    text-anchor="middle"
                    class="fill-slate-400"
                    style="font-size: 6px"
                  >
                    Total Members
                  </text>
                </svg>
              </div>
              <div class="grid grid-cols-2 gap-2 mt-4">
                <div class="legend-item">
                  <div class="legend-dot bg-slate-400"></div>
                  <span>Silver 45%</span>
                </div>
                <div class="legend-item">
                  <div class="legend-dot bg-amber-500"></div>
                  <span>Gold 30%</span>
                </div>
                <div class="legend-item">
                  <div class="legend-dot bg-violet-400"></div>
                  <span>Platinum 15%</span>
                </div>
                <div class="legend-item">
                  <div class="legend-dot bg-cyan-400"></div>
                  <span>Diamond 10%</span>
                </div>
              </div>
            </div>
            <!-- Transaction Activity Donut -->
            <div class="chart-card">
              <h3 class="text-sm font-semibold text-white mb-4">
                Transaction Activity
              </h3>
              <div class="donut-container">
                <svg viewBox="0 0 100 100" class="w-full h-full">
                  <circle
                    cx="50"
                    cy="50"
                    r="40"
                    fill="none"
                    stroke="#334155"
                    stroke-width="12"
                  />
                  <circle
                    cx="50"
                    cy="50"
                    r="40"
                    fill="none"
                    stroke="#10b981"
                    stroke-width="12"
                    stroke-dasharray="170.9 251.33"
                    stroke-dashoffset="0"
                    transform="rotate(-90 50 50)"
                  />
                  <circle
                    cx="50"
                    cy="50"
                    r="40"
                    fill="none"
                    stroke="#64748b"
                    stroke-width="12"
                    stroke-dasharray="80.43 251.33"
                    stroke-dashoffset="-170.9"
                    transform="rotate(-90 50 50)"
                  />
                  <text
                    x="50"
                    y="47"
                    text-anchor="middle"
                    class="fill-white text-lg font-bold"
                    style="font-size: 12px"
                  >
                    68%
                  </text>
                  <text
                    x="50"
                    y="58"
                    text-anchor="middle"
                    class="fill-slate-400"
                    style="font-size: 6px"
                  >
                    Active Rate
                  </text>
                </svg>
              </div>
              <div class="space-y-2 mt-4">
                <div class="legend-item">
                  <div class="legend-dot bg-emerald-500"></div>
                  <span>With Transactions 68%</span>
                </div>
                <div class="legend-item">
                  <div class="legend-dot bg-slate-500"></div>
                  <span>Without Transactions 32%</span>
                </div>
              </div>
            </div>
            <!-- Rewards Metric Table -->
            <div class="chart-card">
              <h3 class="text-sm font-semibold text-white mb-4">
                Rewards Metric
              </h3>
              <div class="space-y-0">
                <div
                  class="grid grid-cols-3 text-xs text-slate-400 font-medium pb-2 border-b border-slate-700"
                >
                  <span>Period</span> <span class="text-right">Issued</span>
                  <span class="text-right">Redeemed</span>
                </div>
                <div
                  class="grid grid-cols-3 py-2.5 border-b border-slate-700/50 text-sm"
                >
                  <span class="text-slate-300">Day</span>
                  <span class="text-right text-white font-medium">142</span>
                  <span class="text-right text-emerald-400 font-medium"
                    >89</span
                  >
                </div>
                <div
                  class="grid grid-cols-3 py-2.5 border-b border-slate-700/50 text-sm"
                >
                  <span class="text-slate-300">Week</span>
                  <span class="text-right text-white font-medium">1,247</span>
                  <span class="text-right text-emerald-400 font-medium"
                    >892</span
                  >
                </div>
                <div
                  class="grid grid-cols-3 py-2.5 border-b border-slate-700/50 text-sm"
                >
                  <span class="text-slate-300">Month</span>
                  <span class="text-right text-white font-medium">5,841</span>
                  <span class="text-right text-emerald-400 font-medium"
                    >4,127</span
                  >
                </div>
                <div class="grid grid-cols-3 py-2.5 text-sm">
                  <span class="text-slate-300">Year</span>
                  <span class="text-right text-white font-medium">48,290</span>
                  <span class="text-right text-emerald-400 font-medium"
                    >35,218</span
                  >
                </div>
              </div>
            </div>
            <!-- Points Metric Table -->
            <div class="chart-card">
              <h3 class="text-sm font-semibold text-white mb-4">
                Points Metric
              </h3>
              <div class="space-y-0">
                <div
                  class="grid grid-cols-2 text-xs text-slate-400 font-medium pb-2 border-b border-slate-700"
                >
                  <span>Metric</span> <span class="text-right">Value</span>
                </div>
                <div
                  class="grid grid-cols-2 py-2.5 border-b border-slate-700/50 text-sm"
                >
                  <span class="text-slate-300">Total Issued</span>
                  <span class="text-right text-white font-semibold">12.4M</span>
                </div>
                <div
                  class="grid grid-cols-2 py-2.5 border-b border-slate-700/50 text-sm"
                >
                  <span class="text-slate-300">Total Redeemed</span>
                  <span class="text-right text-emerald-400 font-semibold"
                    >8.7M</span
                  >
                </div>
                <div
                  class="grid grid-cols-2 py-2.5 border-b border-slate-700/50 text-sm"
                >
                  <span class="text-slate-300">Expired</span>
                  <span class="text-right text-rose-400 font-semibold"
                    >1.2M</span
                  >
                </div>
                <div class="grid grid-cols-2 py-2.5 text-sm">
                  <span class="text-slate-300">Redemption Rate</span>
                  <span class="text-right text-indigo-400 font-semibold"
                    >70.2%</span
                  >
                </div>
              </div>
            </div>
          </div>

          <!-- Points Issued VS Points Redeemed (line chart) -->
          <div class="chart-card">
            <div class="flex items-center justify-between mb-6">
              <div>
                <h3 class="text-sm font-semibold text-white">
                  Points Issued VS Points Redeemed
                </h3>
                <p class="text-xs text-slate-400 mt-1">
                  12-month historical trend
                </p>
              </div>
              <div class="flex items-center gap-6">
                <div class="legend-item">
                  <div class="legend-dot bg-indigo-500"></div>
                  <span class="text-slate-300">Points Issued</span>
                </div>
                <div class="legend-item">
                  <div class="legend-dot bg-emerald-500"></div>
                  <span class="text-slate-300">Points Redeemed</span>
                </div>
              </div>
            </div>
            <div class="relative h-64">
              <svg
                class="w-full h-full"
                viewBox="0 0 800 200"
                preserveAspectRatio="none"
              >
                <g stroke="#334155" stroke-width="0.5">
                  <line x1="0" y1="40" x2="800" y2="40" />
                  <line x1="0" y1="80" x2="800" y2="80" />
                  <line x1="0" y1="120" x2="800" y2="120" />
                  <line x1="0" y1="160" x2="800" y2="160" />
                </g>
                <path
                  d="M 0,140 L 66,130 L 133,120 L 200,100 L 266,110 L 333,85 L 400,75 L 466,90 L 533,60 L 600,50 L 666,45 L 733,30 L 800,20"
                  fill="none"
                  stroke="#6366f1"
                  stroke-width="3"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
                <path
                  d="M 0,140 L 66,130 L 133,120 L 200,100 L 266,110 L 333,85 L 400,75 L 466,90 L 533,60 L 600,50 L 666,45 L 733,30 L 800,20 L 800,200 L 0,200 Z"
                  fill="url(#indigo-gradient)"
                  opacity="0.2"
                />
                <path
                  d="M 0,160 L 66,155 L 133,145 L 200,130 L 266,135 L 333,115 L 400,105 L 466,115 L 533,90 L 600,80 L 666,75 L 733,60 L 800,50"
                  fill="none"
                  stroke="#10b981"
                  stroke-width="3"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
                <path
                  d="M 0,160 L 66,155 L 133,145 L 200,130 L 266,135 L 333,115 L 400,105 L 466,115 L 533,90 L 600,80 L 666,75 L 733,60 L 800,50 L 800,200 L 0,200 Z"
                  fill="url(#emerald-gradient)"
                  opacity="0.2"
                />
                <g fill="#6366f1">
                  <circle cx="0" cy="140" r="4" />
                  <circle cx="66" cy="130" r="4" />
                  <circle cx="133" cy="120" r="4" />
                  <circle cx="200" cy="100" r="4" />
                  <circle cx="266" cy="110" r="4" />
                  <circle cx="333" cy="85" r="4" />
                  <circle cx="400" cy="75" r="4" />
                  <circle cx="466" cy="90" r="4" />
                  <circle cx="533" cy="60" r="4" />
                  <circle cx="600" cy="50" r="4" />
                  <circle cx="666" cy="45" r="4" />
                  <circle cx="733" cy="30" r="4" />
                  <circle cx="800" cy="20" r="4" />
                </g>
                <g fill="#10b981">
                  <circle cx="0" cy="160" r="4" />
                  <circle cx="66" cy="155" r="4" />
                  <circle cx="133" cy="145" r="4" />
                  <circle cx="200" cy="130" r="4" />
                  <circle cx="266" cy="135" r="4" />
                  <circle cx="333" cy="115" r="4" />
                  <circle cx="400" cy="105" r="4" />
                  <circle cx="466" cy="115" r="4" />
                  <circle cx="533" cy="90" r="4" />
                  <circle cx="600" cy="80" r="4" />
                  <circle cx="666" cy="75" r="4" />
                  <circle cx="733" cy="60" r="4" />
                  <circle cx="800" cy="50" r="4" />
                </g>
                <defs>
                  <linearGradient
                    id="indigo-gradient"
                    x1="0%"
                    y1="0%"
                    x2="0%"
                    y2="100%"
                  >
                    <stop offset="0%" stop-color="#6366f1" />
                    <stop offset="100%" stop-color="#6366f1" stop-opacity="0" />
                  </linearGradient>
                  <linearGradient
                    id="emerald-gradient"
                    x1="0%"
                    y1="0%"
                    x2="0%"
                    y2="100%"
                  >
                    <stop offset="0%" stop-color="#10b981" />
                    <stop offset="100%" stop-color="#10b981" stop-opacity="0" />
                  </linearGradient>
                </defs>
              </svg>
              <div
                class="absolute bottom-0 left-0 right-0 flex justify-between text-xs text-slate-500 px-2"
                style="transform: translateY(20px)"
              >
                <span>Jan</span><span>Feb</span><span>Mar</span><span>Apr</span
                ><span>May</span><span>Jun</span><span>Jul</span><span>Aug</span
                ><span>Sep</span><span>Oct</span><span>Nov</span
                ><span>Dec</span>
              </div>
              <div
                class="absolute top-0 left-0 bottom-0 flex flex-col justify-between text-xs text-slate-500 py-2"
                style="transform: translateX(-30px)"
              >
                <span>2M</span><span>1.5M</span><span>1M</span><span>500K</span
                ><span>0</span>
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>

    <script>
      // ---------- DRAWER CONTROLLERS ----------
      const sidebar = document.getElementById("mainSidebar");
      const overlay = document.getElementById("drawerOverlay");

      window.openSidebar = function () {
        if (window.innerWidth < 1024) {
          sidebar.classList.add("drawer-open");
          overlay.classList.add("active");
          document.body.style.overflow = "hidden";
        }
      };
      window.closeSidebar = function () {
        sidebar.classList.remove("drawer-open");
        overlay.classList.remove("active");
        document.body.style.overflow = "";
      };
      window.addEventListener("resize", function () {
        if (window.innerWidth >= 1024) {
          sidebar.classList.remove("drawer-open");
          overlay.classList.remove("active");
          document.body.style.overflow = "";
        } else {
          sidebar.classList.remove("drawer-open");
          overlay.classList.remove("active");
          document.body.style.overflow = "";
        }
      });
      window.addEventListener("DOMContentLoaded", function () {
        if (window.innerWidth < 1024) {
          sidebar.classList.remove("drawer-open");
          overlay.classList.remove("active");
          document.body.style.overflow = "";
        }
      });

      // ---------- UNIVERSAL SUBMENU TOGGLE ----------
      window.toggleSubmenu = function (submenuId, chevronId) {
        const submenu = document.getElementById(submenuId);
        const chevron = document.getElementById(chevronId);
        if (submenu && chevron) {
          submenu.classList.toggle("hidden");
          chevron.textContent = submenu.classList.contains("hidden")
            ? "â–¾"
            : "â–´";
        }
      };

      // ---------- TIME TOGGLE ----------
      const timeToggle = document.getElementById("time-toggle");
      const timeButtons = timeToggle
        ? timeToggle.querySelectorAll("button")
        : [];
      const dataByPeriod = {
        daily: {
          members: "847",
          points: "52.4K",
          channels: "12",
          revenue: "$24.8K",
        },
        monthly: {
          members: "24,847",
          points: "1.24M",
          channels: "12",
          revenue: "$892K",
        },
        ytd: {
          members: "89,421",
          points: "12.4M",
          channels: "12",
          revenue: "$4.2M",
        },
      };
      timeButtons.forEach((button) => {
        button.addEventListener("click", () => {
          timeButtons.forEach((b) => b.classList.remove("active"));
          button.classList.add("active");
          const period = button.dataset.period;
          const data = dataByPeriod[period];
          if (data) {
            document.getElementById("kpi-members").textContent = data.members;
            document.getElementById("kpi-points").textContent = data.points;
            document.getElementById("kpi-channels").textContent = data.channels;
            document.getElementById("kpi-revenue").textContent = data.revenue;
          }
        });
      });

      // ---------- NAV ITEMS ACTIVE STATE ----------
      const navItems = document.querySelectorAll(".premium-sidebar .item");
      navItems.forEach((item) => {
        item.addEventListener("click", function (e) {
          if (this.id.includes("toggle") || this.id === "cm-toggle") return;
          navItems.forEach((i) => i.classList.remove("active"));
          this.classList.add("active");
        });
      });

      // ---------- SDK CONFIG ----------
      const defaultConfig = {
        company_name: "goFides",
        dashboard_title: "Executive Dashboard",
        primary_color: "#6366f1",
        secondary_color: "#10b981",
        text_color: "#f1f5f9",
        bg_color: "#0f172a",
        card_color: "#1e293b",
      };
      let config = { ...defaultConfig };
      async function onConfigChange(newConfig) {
        document.getElementById("company-name").textContent =
          newConfig.company_name || defaultConfig.company_name;
        document.getElementById("dashboard-title").textContent =
          newConfig.dashboard_title || defaultConfig.dashboard_title;
      }
      function mapToCapabilities(cfg) {
        return {
          recolorables: [],
          borderables: [],
          fontEditable: undefined,
          fontSizeable: undefined,
        };
      }
      function mapToEditPanelValues(cfg) {
        return new Map([
          ["company_name", cfg.company_name || defaultConfig.company_name],
          [
            "dashboard_title",
            cfg.dashboard_title || defaultConfig.dashboard_title,
          ],
        ]);
      }
      if (window.elementSdk) {
        window.elementSdk.init({
          defaultConfig,
          onConfigChange,
          mapToCapabilities,
          mapToEditPanelValues,
        });
      }
    </script>
  </body>
</html>
