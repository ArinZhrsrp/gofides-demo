<!doctype html>
<html lang="en" class="h-full">
  <head>
    <meta charset="UTF-8" />
    <!-- ✅ Responsive viewport with shrink-to-fit support -->
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.5, user-scalable=yes"
    />
    <title>Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="/_sdk/element_sdk.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&amp;display=swap"
      rel="stylesheet"
    />
    <style>
      /* your original custom styles + enhanced mobile drawer */
      body {
        box-sizing: border-box;
        font-family: "Inter", sans-serif;
      }

      * {
        box-sizing: border-box;
      }

      ::-webkit-scrollbar {
        width: 6px;
        height: 6px;
      }

      ::-webkit-scrollbar-track {
        background: #f1f5f9;
      }

      ::-webkit-scrollbar-thumb {
        background: #cbd5e1;
        border-radius: 3px;
      }

      ::-webkit-scrollbar-thumb:hover {
        background: #94a3b8;
      }

      .sidebar-section {
        margin-bottom: 4px;
      }

      .sidebar-label {
        font-size: 10px;
        font-weight: 600;
        letter-spacing: 0.05em;
        color: #64748b;
        padding: 12px 16px 6px;
        text-transform: uppercase;
      }

      .sidebar-item {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 9px 16px;
        color: #475569;
        font-size: 13px;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.15s ease;
        border-left: 3px solid transparent;
      }

      .sidebar-item:hover {
        background: #f1f5f9;
        color: #1e293b;
      }

      .sidebar-item.active {
        background: linear-gradient(90deg, #eef2ff 0%, #f8fafc 100%);
        color: #4f46e5;
        border-left-color: #4f46e5;
      }

      .sidebar-item svg {
        width: 18px;
        height: 18px;
        stroke-width: 1.5;
        flex-shrink: 0;
      }

      .sidebar-subitem {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 7px 16px 7px 44px;
        color: #64748b;
        font-size: 12px;
        font-weight: 400;
        cursor: pointer;
      }

      .sidebar-subitem:hover {
        background: #f8fafc;
        color: #475569;
      }

      .sidebar-subitem.active {
        color: #4f46e5;
        background: #fafbff;
      }

      .kpi-card {
        background: white;
        border-radius: 12px;
        padding: 20px;
        border: 1px solid #e2e8f0;
        transition: all 0.2s ease;
      }

      .kpi-card:hover {
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        border-color: #cbd5e1;
      }

      /* Updated bar graph styles */
      .bar-graph {
        display: flex;
        align-items: flex-end;
        gap: 3px;
        height: 40px;
        margin-top: 16px;
      }

      .bar-graph-item {
        flex: 1;
        border-radius: 3px 3px 0 0;
        transition: height 0.2s ease;
        height: calc(100% * var(--bar-height, 0.8));
      }

      .sparkline {
        display: flex;
        align-items: flex-end;
        gap: 2px;
        height: 32px;
      }

      .sparkline-bar {
        width: 4px;
        border-radius: 2px;
        transition: height 0.3s ease;
      }

      .chart-container {
        background: white;
        border-radius: 12px;
        border: 1px solid #e2e8f0;
        overflow: hidden;
      }

      .time-toggle {
        display: flex;
        background: #f1f5f9;
        border-radius: 8px;
        padding: 4px;
      }

      .time-toggle-btn {
        padding: 8px 16px;
        font-size: 13px;
        font-weight: 500;
        color: #64748b;
        border-radius: 6px;
        cursor: pointer;
        transition: all 0.15s ease;
        white-space: nowrap;
      }

      .time-toggle-btn.active {
        background: white;
        color: #4f46e5;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      }

      .donut-chart {
        position: relative;
        width: 140px;
        height: 140px;
        margin: 0 auto;
      }

      .donut-segment {
        fill: none;
        stroke-width: 28;
        transform: rotate(-90deg);
        transform-origin: center;
      }

      .table-row {
        transition: background 0.15s ease;
      }

      .table-row:hover {
        background: #f8fafc;
      }

      .badge {
        display: inline-flex;
        align-items: center;
        padding: 2px 8px;
        border-radius: 9999px;
        font-size: 11px;
        font-weight: 500;
      }

      .trend-up {
        color: #059669;
      }

      .trend-down {
        color: #dc2626;
      }

      @view-transition {
        navigation: auto;
      }

      /* ✅✅✅ MOBILE DRAWER SYSTEM – SIDEBAR CLOSED BY DEFAULT, OPEN WITH MENU BUTTON ✅✅✅ */
      /* Sidebar transforms as off-canvas drawer on mobile */
      @media (max-width: 1023px) {
        /* main container: relative for overlay positioning */
        .flex.h-full.w-full {
          position: relative;
          flex-wrap: wrap;
        }

        /* sidebar: fixed drawer style, closed by default */
        aside.w-64 {
          position: fixed !important;
          top: 0;
          left: 0;
          width: 280px !important;
          max-width: 85%;
          height: 100vh !important;
          z-index: 1000;
          background: white;
          box-shadow: 0 0 30px rgba(0, 0, 0, 0.2);
          transition:
            transform 0.3s ease,
            box-shadow 0.3s ease;
          transform: translateX(-100%);
          /* closed */
          border-right: 1px solid #e2e8f0;
          display: flex;
          flex-direction: column;
        }

        /* when open class added, slide in */
        aside.w-64.drawer-open {
          transform: translateX(0);
          box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
        }

        /* main content takes full width */
        main.flex-1 {
          width: 100%;
          flex: 0 0 100%;
        }

        /* overlay backdrop when drawer is open */
        .drawer-overlay {
          position: fixed;
          top: 0;
          left: 0;
          width: 100vw;
          height: 100vh;
          background-color: rgba(0, 0, 0, 0.4);
          backdrop-filter: blur(2px);
          z-index: 999;
          display: none;
          transition: opacity 0.2s ease;
        }

        .drawer-overlay.active {
          display: block;
        }

        /* menu button always visible in mobile header */
        .mobile-menu-btn {
          display: block !important;
          margin-right: 8px;
        }

        /* adjust header layout for menu button */
        .header-mobile-area {
          display: flex;
          align-items: center;
          width: 100%;
        }

        /* KPI and other grids stack */
        .grid-cols-4 {
          grid-template-columns: 1fr !important;
          gap: 1rem;
        }

        .grid-cols-2 {
          grid-template-columns: 1fr !important;
        }

        .grid-cols-12 {
          grid-template-columns: 1fr !important;
        }

        .col-span-3,
        .col-span-4,
        .col-span-6,
        .col-span-12 {
          grid-column: span 1 / span 1 !important;
        }
      }

      /* desktop: drawer always visible, no overlay, no transform, menu button hidden */
      @media (min-width: 1024px) {
        aside.w-64 {
          transform: none !important;
          position: relative !important;
          width: 16rem !important;
          height: 100% !important;
          box-shadow: none;
        }

        .drawer-overlay {
          display: none !important;
        }

        .mobile-menu-btn {
          display: none !important;
        }
      }

      /* small screen tweaks */
      @media (max-width: 639px) {
        .p-6 {
          padding: 0.75rem;
        }

        .donut-chart {
          width: 140px;
          height: 140px;
        }

        .kpi-card .text-2xl {
          font-size: 1.5rem;
        }
      }

      /* mobile menu button always hidden on desktop, block on mobile via media */
      .mobile-menu-btn {
        display: none;
        background: white;
        border: 1px solid #e2e8f0;
        border-radius: 8px;
        padding: 8px 10px;
        line-height: 1;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.02);
        transition: all 0.15s ease;
      }

      .mobile-menu-btn:hover {
        background: #f8fafc;
        border-color: #cbd5e1;
      }

      /* preserve all original colors, no content removed */
    </style>
    <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  </head>

  <body class="h-full bg-slate-50" style="background-color: #f8fafc">
    <!-- Drawer overlay – hidden by default, shows when sidebar open -->
    <div
      id="drawerOverlay"
      class="drawer-overlay"
      onclick="closeSidebar()"
    ></div>

    <div class="flex h-full w-full flex-wrap lg:flex-nowrap">
      <!-- =============== SIDEBAR (mobile: hidden by default, opened via menu) ============= -->
      <aside
        id="mainSidebar"
        class="w-64 bg-white border-r border-slate-200 flex flex-col h-full flex-shrink-0 overflow-y-auto"
      >
        <!-- Logo -->
        <!-- Logo -->
        <div class="p-4 border-b border-slate-100">
          <img
            src="/gofides/lightmode/gofideslogo.svg"
            alt="Company Logo"
            class="w-full h-auto max-h-12 object-contain"
          />
        </div>
        <!-- Navigation (exactly the same as original) -->
        <nav class="flex-1 py-2 overflow-y-auto">
          <!-- DASHBOARD -->
          <div class="sidebar-section">
            <div class="sidebar-item active">
              <svg viewbox="0 0 24 24" fill="none" stroke="currentColor">
                <rect x="3" y="3" width="7" height="7" rx="1" />
                <rect x="14" y="3" width="7" height="7" rx="1" />
                <rect x="3" y="14" width="7" height="7" rx="1" />
                <rect x="14" y="14" width="7" height="7" rx="1" /></svg
              ><span>Dashboard</span>
            </div>
          </div>
          <!-- CUSTOMERS -->
          <div class="sidebar-section">
            <div class="sidebar-label">Customers</div>
            <div class="sidebar-item">
              <svg viewbox="0 0 24 24" fill="none" stroke="currentColor">
                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" />
                <circle cx="9" cy="7" r="4" />
                <path d="M23 21v-2a4 4 0 0 0-3-3.87" />
                <path d="M16 3.13a4 4 0 0 1 0 7.75" /></svg
              ><span>Customer List and Referrals</span>
            </div>
            <div class="sidebar-item">
              <svg viewbox="0 0 24 24" fill="none" stroke="currentColor">
                <path
                  d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"
                />
                <line x1="7" y1="7" x2="7.01" y2="7" /></svg
              ><span>Customer Group</span>
            </div>
          </div>
          <!-- OPERATIONS -->
          <div class="sidebar-section">
            <div class="sidebar-label">Operations</div>
            <div class="sidebar-item">
              <svg viewbox="0 0 24 24" fill="none" stroke="currentColor">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                <polyline points="7 10 12 15 17 10" />
                <line x1="12" y1="15" x2="12" y2="3" /></svg
              ><span>Redemptions</span>
            </div>
            <div class="sidebar-item">
              <svg viewbox="0 0 24 24" fill="none" stroke="currentColor">
                <path
                  d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"
                />
                <polyline points="14 2 14 8 20 8" />
                <line x1="16" y1="13" x2="8" y2="13" />
                <line x1="16" y1="17" x2="8" y2="17" />
                <polyline points="10 9 9 9 8 9" /></svg
              ><span>Transactions</span>
            </div>
          </div>
          <!-- ENGAGEMENT -->
          <div class="sidebar-section">
            <div class="sidebar-label">Engagement</div>
            <div class="sidebar-item">
              <svg viewbox="0 0 24 24" fill="none" stroke="currentColor">
                <path d="M22 2L11 13" />
                <path d="M22 2l-7 20-4-9-9-4 20-7z" /></svg
              ><span>Campaigns</span>
            </div>
            <div class="sidebar-item">
              <svg viewbox="0 0 24 24" fill="none" stroke="currentColor">
                <circle cx="12" cy="8" r="6" />
                <path d="M15.477 12.89L17 22l-5-3-5 3 1.523-9.11" /></svg
              ><span>Rewards Catalog</span>
            </div>
            <div class="sidebar-item">
              <svg viewbox="0 0 24 24" fill="none" stroke="currentColor">
                <path d="M12 2v20M2 12h20" />
                <circle cx="12" cy="12" r="10" /></svg
              ><span>Point Ledgers</span>
            </div>
            <div
              class="sidebar-item"
              onclick="toggleSubmenu('activity-submenu')"
            >
              <svg viewbox="0 0 24 24" fill="none" stroke="currentColor">
                <polyline points="22 12 18 12 15 21 9 3 6 12 2 12" /></svg
              ><span>Campaign Mechanics</span>
              <svg
                class="ml-auto w-4 h-4 transition-transform"
                id="activity-chevron"
                viewbox="0 0 24 24"
                fill="none"
                stroke="currentColor"
              >
                <polyline points="6 9 12 15 18 9" />
              </svg>
            </div>
            <div id="activity-submenu" class="hidden">
              <div class="sidebar-subitem"><span>• Preset List</span></div>
              <div class="sidebar-subitem">
                <span>• Custom Integration List</span>
              </div>
            </div>
          </div>
          <!-- STRATEGY -->
          <div class="sidebar-section">
            <div class="sidebar-label">Strategy</div>
            <div class="sidebar-item">
              <svg viewbox="0 0 24 24" fill="none" stroke="currentColor">
                <polygon
                  points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"
                /></svg
              ><span>Program Tiers</span>
            </div>
            <div class="sidebar-item">
              <svg viewbox="0 0 24 24" fill="none" stroke="currentColor">
                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" />
                <circle cx="9" cy="7" r="4" />
                <circle cx="19" cy="11" r="2" />
                <path d="M19 8v1" />
                <path d="M19 13v1" />
                <path d="M16.5 9.5l.87.5" />
                <path d="M20.63 12l.87.5" />
                <path d="M16.5 12.5l.87-.5" />
                <path d="M20.63 10l.87-.5" /></svg
              ><span>Audiences</span>
            </div>
            <div class="sidebar-item">
              <svg viewbox="0 0 24 24" fill="none" stroke="currentColor">
                <circle cx="12" cy="12" r="10" />
                <circle cx="12" cy="12" r="4" />
                <line x1="21.17" y1="8" x2="12" y2="8" />
                <line x1="3.95" y1="6.06" x2="8.54" y2="14" />
                <line x1="10.88" y1="21.94" x2="15.46" y2="14" /></svg
              ><span>Touchpoints</span>
            </div>
          </div>
          <!-- ADMINISTRATION -->
          <div class="sidebar-section">
            <div class="sidebar-label">Administration</div>
            <div
              class="sidebar-item"
              onclick="toggleSubmenu('settings-submenu')"
            >
              <svg viewbox="0 0 24 24" fill="none" stroke="currentColor">
                <circle cx="12" cy="12" r="3" />
                <path
                  d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"
                /></svg
              ><span>System Settings</span>
              <svg
                class="ml-auto w-4 h-4 transition-transform"
                id="settings-chevron"
                viewbox="0 0 24 24"
                fill="none"
                stroke="currentColor"
              >
                <polyline points="6 9 12 15 18 9" />
              </svg>
            </div>
            <div id="settings-submenu" class="hidden">
              <div class="sidebar-subitem"><span>• Account Rules</span></div>
              <div class="sidebar-subitem"><span>• Referral Logic</span></div>
              <div class="sidebar-subitem"><span>• Points Policy</span></div>
            </div>
            <div class="sidebar-item" onclick="toggleSubmenu('team-submenu')">
              <svg viewbox="0 0 24 24" fill="none" stroke="currentColor">
                <path
                  d="M12 4.354a4 4 0 1 1 0 5.292M15 21H3v-1a6 6 0 0 1 12 0v1zm0 0h6v-1a6 6 0 0 0-9-5.197M13 7a4 4 0 1 1-8 0 4 4 0 0 1 8 0z"
                /></svg
              ><span>Team Access</span>
              <svg
                class="ml-auto w-4 h-4 transition-transform"
                id="team-chevron"
                viewbox="0 0 24 24"
                fill="none"
                stroke="currentColor"
              >
                <polyline points="6 9 12 15 18 9" />
              </svg>
            </div>
            <div id="team-submenu" class="hidden">
              <div class="sidebar-subitem"><span>• Member List</span></div>
              <div class="sidebar-subitem"><span>• Permissions</span></div>
            </div>
            <!-- Developer Only -->
            <div
              class="sidebar-item"
              onclick="toggleSubmenu('developer-submenu')"
            >
              <svg viewbox="0 0 24 24" fill="none" stroke="currentColor">
                <rect x="2" y="3" width="20" height="14" rx="2" ry="2" />
                <line x1="8" y1="21" x2="16" y2="21" />
                <line x1="12" y1="17" x2="12" y2="21" />
                <path d="M7 7l2 2-2 2" />
                <path d="M17 7l-2 2 2 2" /></svg
              ><span>Developer Only</span>
              <svg
                class="ml-auto w-4 h-4 transition-transform"
                id="developer-chevron"
                viewbox="0 0 24 24"
                fill="none"
                stroke="currentColor"
              >
                <polyline points="6 9 12 15 18 9" />
              </svg>
            </div>
            <div id="developer-submenu" class="hidden">
              <div class="sidebar-subitem">
                <span>• Custom Integration</span>
              </div>
            </div>
          </div>
        </nav>
        <!-- User Profile (unchanged) -->
        <div class="p-4 border-t border-slate-100">
          <div class="flex items-center gap-3">
            <div
              class="w-9 h-9 rounded-full bg-gradient-to-br from-emerald-400 to-emerald-600 flex items-center justify-center text-white text-sm font-semibold"
            >
              JD
            </div>
            <div class="flex-1 min-w-0">
              <p class="text-sm font-medium text-slate-800 truncate">
                John Doe
              </p>
              <p class="text-xs text-slate-500 truncate">Admin</p>
            </div>
            <button
              onclick="window.location.href = '/gofides/lightmode/login.html'"
              class="p-2 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-all"
              title="Logout"
            >
              <svg
                class="w-5 h-5"
                viewbox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4" />
                <polyline points="16 17 21 12 16 7" />
                <line x1="21" y1="12" x2="9" y2="12" />
              </svg>
            </button>
          </div>
        </div>
      </aside>

      <!-- =============== MAIN CONTENT – with mobile menu button ============= -->
      <main class="flex-1 overflow-y-auto h-full bg-slate-50">
        <div class="p-4 md:p-6">
          <!-- Header with mobile menu button (visible only on small screens) -->
          <div class="flex flex-wrap items-center justify-between gap-4 mb-6">
            <div class="flex items-center gap-2">
              <!-- Mobile menu button - opens sidebar -->
              <button
                id="mobileMenuBtn"
                class="mobile-menu-btn"
                onclick="openSidebar()"
                aria-label="Open menu"
              >
                <svg
                  class="w-5 h-5 text-slate-700"
                  viewbox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <line x1="3" y1="12" x2="21" y2="12"></line>
                  <line x1="3" y1="6" x2="21" y2="6"></line>
                  <line x1="3" y1="18" x2="21" y2="18"></line>
                </svg>
              </button>
              <div>
                <h1
                  id="dashboard-title"
                  class="text-2xl font-bold text-slate-800"
                >
                  Executive Dashboard
                </h1>
                <p class="text-sm text-slate-500 mt-1">
                  Real-time loyalty program intelligence
                </p>
              </div>
            </div>
            <div class="flex items-center flex-wrap gap-3">
              <!-- Time Toggle (exact) -->
              <div class="time-toggle" id="time-toggle">
                <div class="time-toggle-btn" data-period="daily">Daily</div>
                <div class="time-toggle-btn active" data-period="monthly">
                  Monthly
                </div>
                <div class="time-toggle-btn" data-period="ytd">
                  Year-to-Date
                </div>
              </div>
              <button
                class="flex items-center gap-2 px-4 py-2 bg-white border border-slate-200 rounded-lg text-sm font-medium text-slate-700 hover:bg-slate-50 transition-colors"
              >
                <svg
                  class="w-4 h-4"
                  viewbox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                  <polyline points="7 10 12 15 17 10" />
                  <line x1="12" y1="15" x2="12" y2="3" />
                </svg>
                Export
              </button>
              <button
                class="flex items-center gap-2 px-4 py-2 bg-indigo-600 rounded-lg text-sm font-medium text-white hover:bg-indigo-700 transition-colors"
              >
                <svg
                  class="w-4 h-4"
                  viewbox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <line x1="12" y1="5" x2="12" y2="19" />
                  <line x1="5" y1="12" x2="19" y2="12" />
                </svg>
                New Campaign
              </button>
            </div>
          </div>

          <!-- KPI CARDS - UPDATED WITH 5 CARDS (4 original + Active Members) AND BAR GRAPHS -->
          <div
            class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-6"
          >
            <!-- Total Members -->
            <div class="kpi-card">
              <div class="flex items-start justify-between">
                <div>
                  <p
                    class="text-xs font-medium text-slate-500 uppercase tracking-wide"
                  >
                    Total Members
                  </p>
                  <p
                    class="text-2xl font-bold text-slate-800 mt-1"
                    id="kpi-members"
                  >
                    24,847
                  </p>
                  <div class="flex items-center gap-1 mt-2">
                    <svg
                      class="w-4 h-4 text-emerald-500"
                      viewbox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                    >
                      <polyline points="23 6 13.5 15.5 8.5 10.5 1 18" />
                      <polyline points="17 6 23 6 23 12" /></svg
                    ><span class="text-sm font-medium text-emerald-600"
                      >+12.5%</span
                    ><span class="text-xs text-slate-500">vs last period</span>
                  </div>
                </div>
                <div
                  class="w-10 h-10 rounded-lg bg-indigo-50 flex items-center justify-center"
                >
                  <svg
                    class="w-5 h-5 text-indigo-600"
                    viewbox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" />
                    <circle cx="9" cy="7" r="4" />
                    <path d="M23 21v-2a4 4 0 0 0-3-3.87" />
                    <path d="M16 3.13a4 4 0 0 1 0 7.75" />
                  </svg>
                </div>
              </div>
              <div class="bar-graph" id="members-bars"></div>
            </div>

            <!-- ACTIVE MEMBERS (NEW) -->
            <div class="kpi-card">
              <div class="flex items-start justify-between">
                <div>
                  <p
                    class="text-xs font-medium text-slate-500 uppercase tracking-wide"
                  >
                    Active Members
                  </p>
                  <p
                    class="text-2xl font-bold text-slate-800 mt-1"
                    id="kpi-active-members"
                  >
                    16,912
                  </p>
                  <div class="flex items-center gap-1 mt-2">
                    <svg
                      class="w-4 h-4 text-emerald-500"
                      viewbox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                    >
                      <polyline points="23 6 13.5 15.5 8.5 10.5 1 18" />
                      <polyline points="17 6 23 6 23 12" /></svg
                    ><span class="text-sm font-medium text-emerald-600"
                      >68%</span
                    ><span class="text-xs text-slate-500">active rate</span>
                  </div>
                </div>
                <div
                  class="w-10 h-10 rounded-lg bg-cyan-50 flex items-center justify-center"
                >
                  <svg
                    class="w-5 h-5 text-cyan-600"
                    viewbox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14" />
                    <polyline points="22 4 12 14.01 9 11.01" />
                  </svg>
                </div>
              </div>
              <div class="bar-graph" id="active-bars"></div>
            </div>

            <!-- Points Issued -->
            <div class="kpi-card">
              <div class="flex items-start justify-between">
                <div>
                  <p
                    class="text-xs font-medium text-slate-500 uppercase tracking-wide"
                  >
                    Points Issued
                  </p>
                  <p
                    class="text-2xl font-bold text-slate-800 mt-1"
                    id="kpi-points"
                  >
                    3.2M
                  </p>
                  <div class="flex items-center gap-1 mt-2">
                    <svg
                      class="w-4 h-4 text-emerald-500"
                      viewbox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                    >
                      <polyline points="23 6 13.5 15.5 8.5 10.5 1 18" />
                      <polyline points="17 6 23 6 23 12" /></svg
                    ><span class="text-sm font-medium text-emerald-600"
                      >+8.3%</span
                    ><span class="text-xs text-slate-500">vs last period</span>
                  </div>
                </div>
                <div
                  class="w-10 h-10 rounded-lg bg-emerald-50 flex items-center justify-center"
                >
                  <svg
                    class="w-5 h-5 text-emerald-600"
                    viewbox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <circle cx="12" cy="12" r="10" />
                    <path d="M12 6v12" />
                    <path d="M8 10h8" />
                  </svg>
                </div>
              </div>
              <div class="bar-graph" id="points-bars"></div>
            </div>

            <!-- Total Channels -->
            <div class="kpi-card">
              <div class="flex items-start justify-between">
                <div>
                  <p
                    class="text-xs font-medium text-slate-500 uppercase tracking-wide"
                  >
                    Total Channels
                  </p>
                  <p
                    class="text-2xl font-bold text-slate-800 mt-1"
                    id="kpi-channels"
                  >
                    12
                  </p>
                  <div class="flex items-center gap-1 mt-2">
                    <svg
                      class="w-4 h-4 text-emerald-500"
                      viewbox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                    >
                      <polyline points="23 6 13.5 15.5 8.5 10.5 1 18" />
                      <polyline points="17 6 23 6 23 12" /></svg
                    ><span class="text-sm font-medium text-emerald-600">+2</span
                    ><span class="text-xs text-slate-500">this month</span>
                  </div>
                </div>
                <div
                  class="w-10 h-10 rounded-lg bg-violet-50 flex items-center justify-center"
                >
                  <svg
                    class="w-5 h-5 text-violet-600"
                    viewbox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <rect x="2" y="3" width="20" height="14" rx="2" ry="2" />
                    <line x1="8" y1="21" x2="16" y2="21" />
                    <line x1="12" y1="17" x2="12" y2="21" />
                  </svg>
                </div>
              </div>
              <div class="bar-graph" id="channels-bars"></div>
            </div>

            <!-- Total Revenue -->
            <div class="kpi-card">
              <div class="flex items-start justify-between">
                <div>
                  <p
                    class="text-xs font-medium text-slate-500 uppercase tracking-wide"
                  >
                    Total Revenue
                  </p>
                  <p
                    class="text-2xl font-bold text-slate-800 mt-1"
                    id="kpi-revenue"
                  >
                    $847K
                  </p>
                  <div class="flex items-center gap-1 mt-2">
                    <svg
                      class="w-4 h-4 text-emerald-500"
                      viewbox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                    >
                      <polyline points="23 6 13.5 15.5 8.5 10.5 1 18" />
                      <polyline points="17 6 23 6 23 12" /></svg
                    ><span class="text-sm font-medium text-emerald-600"
                      >+15.2%</span
                    ><span class="text-xs text-slate-500">vs last period</span>
                  </div>
                </div>
                <div
                  class="w-10 h-10 rounded-lg bg-amber-50 flex items-center justify-center"
                >
                  <svg
                    class="w-5 h-5 text-amber-600"
                    viewbox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <line x1="12" y1="1" x2="12" y2="23" />
                    <path
                      d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"
                    />
                  </svg>
                </div>
              </div>
              <div class="bar-graph" id="revenue-bars"></div>
            </div>
          </div>

          <!-- Performance Comparison Row: 2 cards side by side → mobile 1 column -->
          <div class="grid grid-cols-2 gap-4 mb-6">
            <!-- Top 10 High-Point Earners -->
            <div class="chart-container overflow-x-auto">
              <div class="px-5 py-4 border-b border-slate-100">
                <h3 class="text-sm font-semibold text-slate-800">
                  Top 10 High-Point Earners
                </h3>
                <p class="text-xs text-slate-500 mt-0.5">
                  Members with highest point accumulation
                </p>
              </div>
              <div class="p-4">
                <table class="w-full">
                  <thead>
                    <tr class="text-xs font-medium text-slate-500 uppercase">
                      <th class="text-left pb-3">Member</th>
                      <th class="text-right pb-3">Points</th>
                      <th class="text-right pb-3">Tier</th>
                    </tr>
                  </thead>
                  <tbody class="text-sm" id="top-earners-table">
                    <tr class="table-row border-t border-slate-50">
                      <td class="py-2.5">
                        <div class="flex items-center gap-2">
                          <div
                            class="w-7 h-7 rounded-full bg-gradient-to-br from-rose-400 to-rose-500 flex items-center justify-center text-white text-xs font-medium"
                          >
                            SM
                          </div>
                          <span class="font-medium text-slate-800"
                            >Sarah Miller</span
                          >
                        </div>
                      </td>
                      <td class="text-right text-slate-700 font-medium">
                        142,580
                      </td>
                      <td class="text-right">
                        <span class="badge bg-amber-100 text-amber-700"
                          >Platinum</span
                        >
                      </td>
                    </tr>
                    <tr class="table-row border-t border-slate-50">
                      <td class="py-2.5">
                        <div class="flex items-center gap-2">
                          <div
                            class="w-7 h-7 rounded-full bg-gradient-to-br from-blue-400 to-blue-500 flex items-center justify-center text-white text-xs font-medium"
                          >
                            JC
                          </div>
                          <span class="font-medium text-slate-800"
                            >James Chen</span
                          >
                        </div>
                      </td>
                      <td class="text-right text-slate-700 font-medium">
                        128,340
                      </td>
                      <td class="text-right">
                        <span class="badge bg-amber-100 text-amber-700"
                          >Platinum</span
                        >
                      </td>
                    </tr>
                    <tr class="table-row border-t border-slate-50">
                      <td class="py-2.5">
                        <div class="flex items-center gap-2">
                          <div
                            class="w-7 h-7 rounded-full bg-gradient-to-br from-emerald-400 to-emerald-500 flex items-center justify-center text-white text-xs font-medium"
                          >
                            EJ
                          </div>
                          <span class="font-medium text-slate-800"
                            >Emily Johnson</span
                          >
                        </div>
                      </td>
                      <td class="text-right text-slate-700 font-medium">
                        115,920
                      </td>
                      <td class="text-right">
                        <span class="badge bg-yellow-100 text-yellow-700"
                          >Gold</span
                        >
                      </td>
                    </tr>
                    <tr class="table-row border-t border-slate-50">
                      <td class="py-2.5">
                        <div class="flex items-center gap-2">
                          <div
                            class="w-7 h-7 rounded-full bg-gradient-to-br from-purple-400 to-purple-500 flex items-center justify-center text-white text-xs font-medium"
                          >
                            MB
                          </div>
                          <span class="font-medium text-slate-800"
                            >Michael Brown</span
                          >
                        </div>
                      </td>
                      <td class="text-right text-slate-700 font-medium">
                        98,450
                      </td>
                      <td class="text-right">
                        <span class="badge bg-yellow-100 text-yellow-700"
                          >Gold</span
                        >
                      </td>
                    </tr>
                    <tr class="table-row border-t border-slate-50">
                      <td class="py-2.5">
                        <div class="flex items-center gap-2">
                          <div
                            class="w-7 h-7 rounded-full bg-gradient-to-br from-indigo-400 to-indigo-500 flex items-center justify-center text-white text-xs font-medium"
                          >
                            AW
                          </div>
                          <span class="font-medium text-slate-800"
                            >Amanda Wilson</span
                          >
                        </div>
                      </td>
                      <td class="text-right text-slate-700 font-medium">
                        87,230
                      </td>
                      <td class="text-right">
                        <span class="badge bg-yellow-100 text-yellow-700"
                          >Gold</span
                        >
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
            <!-- Top 10 Most Redeemed Rewards -->
            <div class="chart-container overflow-x-auto">
              <div class="px-5 py-4 border-b border-slate-100">
                <h3 class="text-sm font-semibold text-slate-800">
                  Top 10 Most Redeemed Rewards
                </h3>
                <p class="text-xs text-slate-500 mt-0.5">
                  Popular rewards by redemption count
                </p>
              </div>
              <div class="p-4">
                <table class="w-full">
                  <thead>
                    <tr class="text-xs font-medium text-slate-500 uppercase">
                      <th class="text-left pb-3">Reward</th>
                      <th class="text-right pb-3">Redemptions</th>
                      <th class="text-right pb-3">Points Cost</th>
                    </tr>
                  </thead>
                  <tbody class="text-sm" id="top-rewards-table">
                    <tr class="table-row border-t border-slate-50">
                      <td class="py-2.5">
                        <div class="flex items-center gap-2">
                          <div
                            class="w-7 h-7 rounded-lg bg-indigo-100 flex items-center justify-center"
                          >
                            <svg
                              class="w-4 h-4 text-indigo-600"
                              viewbox="0 0 24 24"
                              fill="none"
                              stroke="currentColor"
                              stroke-width="2"
                            >
                              <circle cx="9" cy="21" r="1" />
                              <circle cx="20" cy="21" r="1" />
                              <path
                                d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"
                              />
                            </svg>
                          </div>
                          <span class="font-medium text-slate-800"
                            >$50 Gift Card</span
                          >
                        </div>
                      </td>
                      <td class="text-right text-slate-700 font-medium">
                        2,847
                      </td>
                      <td class="text-right text-slate-500">5,000</td>
                    </tr>
                    <tr class="table-row border-t border-slate-50">
                      <td class="py-2.5">
                        <div class="flex items-center gap-2">
                          <div
                            class="w-7 h-7 rounded-lg bg-emerald-100 flex items-center justify-center"
                          >
                            <svg
                              class="w-4 h-4 text-emerald-600"
                              viewbox="0 0 24 24"
                              fill="none"
                              stroke="currentColor"
                              stroke-width="2"
                            >
                              <path
                                d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"
                              />
                            </svg>
                          </div>
                          <span class="font-medium text-slate-800"
                            >Free Shipping</span
                          >
                        </div>
                      </td>
                      <td class="text-right text-slate-700 font-medium">
                        2,156
                      </td>
                      <td class="text-right text-slate-500">1,000</td>
                    </tr>
                    <tr class="table-row border-t border-slate-50">
                      <td class="py-2.5">
                        <div class="flex items-center gap-2">
                          <div
                            class="w-7 h-7 rounded-lg bg-amber-100 flex items-center justify-center"
                          >
                            <svg
                              class="w-4 h-4 text-amber-600"
                              viewbox="0 0 24 24"
                              fill="none"
                              stroke="currentColor"
                              stroke-width="2"
                            >
                              <path d="M12 2L2 7l10 5 10-5-10-5z" />
                              <path d="M2 17l10 5 10-5" />
                              <path d="M2 12l10 5 10-5" />
                            </svg>
                          </div>
                          <span class="font-medium text-slate-800"
                            >20% Discount</span
                          >
                        </div>
                      </td>
                      <td class="text-right text-slate-700 font-medium">
                        1,934
                      </td>
                      <td class="text-right text-slate-500">2,500</td>
                    </tr>
                    <tr class="table-row border-t border-slate-50">
                      <td class="py-2.5">
                        <div class="flex items-center gap-2">
                          <div
                            class="w-7 h-7 rounded-lg bg-rose-100 flex items-center justify-center"
                          >
                            <svg
                              class="w-4 h-4 text-rose-600"
                              viewbox="0 0 24 24"
                              fill="none"
                              stroke="currentColor"
                              stroke-width="2"
                            >
                              <circle cx="12" cy="8" r="6" />
                              <path
                                d="M15.477 12.89L17 22l-5-3-5 3 1.523-9.11"
                              />
                            </svg>
                          </div>
                          <span class="font-medium text-slate-800"
                            >VIP Event Access</span
                          >
                        </div>
                      </td>
                      <td class="text-right text-slate-700 font-medium">
                        1,245
                      </td>
                      <td class="text-right text-slate-500">10,000</td>
                    </tr>
                    <tr class="table-row border-t border-slate-50">
                      <td class="py-2.5">
                        <div class="flex items-center gap-2">
                          <div
                            class="w-7 h-7 rounded-lg bg-cyan-100 flex items-center justify-center"
                          >
                            <svg
                              class="w-4 h-4 text-cyan-600"
                              viewbox="0 0 24 24"
                              fill="none"
                              stroke="currentColor"
                              stroke-width="2"
                            >
                              <rect
                                x="3"
                                y="4"
                                width="18"
                                height="18"
                                rx="2"
                                ry="2"
                              />
                              <line x1="16" y1="2" x2="16" y2="6" />
                              <line x1="8" y1="2" x2="8" y2="6" />
                              <line x1="3" y1="10" x2="21" y2="10" />
                            </svg>
                          </div>
                          <span class="font-medium text-slate-800"
                            >Birthday Bonus</span
                          >
                        </div>
                      </td>
                      <td class="text-right text-slate-700 font-medium">987</td>
                      <td class="text-right text-slate-500">500</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>

          <!-- Distribution Hub + Metrics: grid 12 -> 1 column mobile -->
          <div class="grid grid-cols-12 gap-4 mb-6">
            <!-- Members by Tiers Donut -->
            <div class="col-span-3 chart-container">
              <div class="px-5 py-4 border-b border-slate-100">
                <h3 class="text-sm font-semibold text-slate-800">
                  Members by Tiers
                </h3>
                <p class="text-xs text-slate-500 mt-0.5">
                  Distribution breakdown
                </p>
              </div>
              <div class="p-5 flex flex-col items-center">
                <div class="donut-chart">
                  <svg viewbox="0 0 160 160" class="w-full h-full">
                    <circle
                      cx="80"
                      cy="80"
                      r="60"
                      fill="none"
                      stroke="#f1f5f9"
                      stroke-width="28"
                    />
                    <circle
                      class="donut-segment"
                      cx="80"
                      cy="80"
                      r="60"
                      stroke="#6366f1"
                      stroke-dasharray="113.1 264.6"
                      stroke-dashoffset="0"
                    />
                    <circle
                      class="donut-segment"
                      cx="80"
                      cy="80"
                      r="60"
                      stroke="#f59e0b"
                      stroke-dasharray="94.25 283.5"
                      stroke-dashoffset="-113.1"
                    />
                    <circle
                      class="donut-segment"
                      cx="80"
                      cy="80"
                      r="60"
                      stroke="#a855f7"
                      stroke-dasharray="56.55 321.2"
                      stroke-dashoffset="-207.35"
                    />
                    <circle
                      class="donut-segment"
                      cx="80"
                      cy="80"
                      r="60"
                      stroke="#64748b"
                      stroke-dasharray="113.1 264.6"
                      stroke-dashoffset="-263.9"
                    />
                  </svg>
                  <div
                    class="absolute inset-0 flex flex-col items-center justify-center"
                  >
                    <span class="text-2xl font-bold text-slate-800">24.8K</span
                    ><span class="text-xs text-slate-500">Total</span>
                  </div>
                </div>
                <div class="grid grid-cols-2 gap-x-6 gap-y-2 mt-4 text-xs">
                  <div class="flex items-center gap-2">
                    <div class="w-2.5 h-2.5 rounded-full bg-indigo-500"></div>
                    <span class="text-slate-600">Platinum (30%)</span>
                  </div>
                  <div class="flex items-center gap-2">
                    <div class="w-2.5 h-2.5 rounded-full bg-amber-500"></div>
                    <span class="text-slate-600">Gold (25%)</span>
                  </div>
                  <div class="flex items-center gap-2">
                    <div class="w-2.5 h-2.5 rounded-full bg-purple-500"></div>
                    <span class="text-slate-600">Silver (15%)</span>
                  </div>
                  <div class="flex items-center gap-2">
                    <div class="w-2.5 h-2.5 rounded-full bg-slate-500"></div>
                    <span class="text-slate-600">Bronze (30%)</span>
                  </div>
                </div>
              </div>
            </div>
            <!-- Transaction Activity Donut -->
            <div class="col-span-3 chart-container">
              <div class="px-5 py-4 border-b border-slate-100">
                <h3 class="text-sm font-semibold text-slate-800">
                  Transaction Activity
                </h3>
                <p class="text-xs text-slate-500 mt-0.5">
                  Member engagement rate
                </p>
              </div>
              <div class="p-5 flex flex-col items-center">
                <div class="donut-chart">
                  <svg viewbox="0 0 160 160" class="w-full h-full">
                    <circle
                      cx="80"
                      cy="80"
                      r="60"
                      fill="none"
                      stroke="#f1f5f9"
                      stroke-width="28"
                    />
                    <circle
                      class="donut-segment"
                      cx="80"
                      cy="80"
                      r="60"
                      stroke="#10b981"
                      stroke-dasharray="283.5 94.25"
                      stroke-dashoffset="0"
                    />
                    <circle
                      class="donut-segment"
                      cx="80"
                      cy="80"
                      r="60"
                      stroke="#e2e8f0"
                      stroke-dasharray="94.25 283.5"
                      stroke-dashoffset="-283.5"
                    />
                  </svg>
                  <div
                    class="absolute inset-0 flex flex-col items-center justify-center"
                  >
                    <span class="text-2xl font-bold text-emerald-600">75%</span
                    ><span class="text-xs text-slate-500">Active</span>
                  </div>
                </div>
                <div class="flex flex-col gap-2 mt-4 text-xs w-full">
                  <div class="flex items-center justify-between">
                    <div class="flex items-center gap-2">
                      <div
                        class="w-2.5 h-2.5 rounded-full bg-emerald-500"
                      ></div>
                      <span class="text-slate-600">With Transactions</span>
                    </div>
                    <span class="font-medium text-slate-800">18,635</span>
                  </div>
                  <div class="flex items-center justify-between">
                    <div class="flex items-center gap-2">
                      <div class="w-2.5 h-2.5 rounded-full bg-slate-200"></div>
                      <span class="text-slate-600">No Transactions</span>
                    </div>
                    <span class="font-medium text-slate-800">6,212</span>
                  </div>
                </div>
              </div>
            </div>
            <!-- Rewards Metric Table -->
            <div class="col-span-3 chart-container">
              <div class="px-5 py-4 border-b border-slate-100">
                <h3 class="text-sm font-semibold text-slate-800">
                  Rewards Metrics
                </h3>
                <p class="text-xs text-slate-500 mt-0.5">Issued vs Redeemed</p>
              </div>
              <div class="p-4">
                <table class="w-full text-xs">
                  <thead>
                    <tr class="text-slate-500 uppercase font-medium">
                      <th class="text-left pb-2">Period</th>
                      <th class="text-right pb-2">Issued</th>
                      <th class="text-right pb-2">Redeemed</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr class="border-t border-slate-50">
                      <td class="py-2 text-slate-700 font-medium">Today</td>
                      <td class="text-right text-emerald-600 font-medium">
                        156
                      </td>
                      <td class="text-right text-indigo-600 font-medium">89</td>
                    </tr>
                    <tr class="border-t border-slate-50">
                      <td class="py-2 text-slate-700 font-medium">This Week</td>
                      <td class="text-right text-emerald-600 font-medium">
                        1,247
                      </td>
                      <td class="text-right text-indigo-600 font-medium">
                        634
                      </td>
                    </tr>
                    <tr class="border-t border-slate-50">
                      <td class="py-2 text-slate-700 font-medium">
                        This Month
                      </td>
                      <td class="text-right text-emerald-600 font-medium">
                        4,892
                      </td>
                      <td class="text-right text-indigo-600 font-medium">
                        2,156
                      </td>
                    </tr>
                    <tr class="border-t border-slate-50">
                      <td class="py-2 text-slate-700 font-medium">This Year</td>
                      <td class="text-right text-emerald-600 font-medium">
                        58,340
                      </td>
                      <td class="text-right text-indigo-600 font-medium">
                        31,247
                      </td>
                    </tr>
                  </tbody>
                </table>
                <div class="mt-4 p-3 bg-slate-50 rounded-lg">
                  <div class="flex items-center justify-between">
                    <span class="text-xs text-slate-600">Redemption Rate</span
                    ><span class="text-sm font-bold text-indigo-600"
                      >53.6%</span
                    >
                  </div>
                  <div class="w-full h-2 bg-slate-200 rounded-full mt-2">
                    <div
                      class="h-2 bg-gradient-to-r from-indigo-500 to-indigo-600 rounded-full"
                      style="width: 53.6%"
                    ></div>
                  </div>
                </div>
              </div>
            </div>
            <!-- Points Metric Table -->
            <div class="col-span-3 chart-container">
              <div class="px-5 py-4 border-b border-slate-100">
                <h3 class="text-sm font-semibold text-slate-800">
                  Points Metrics
                </h3>
                <p class="text-xs text-slate-500 mt-0.5">
                  Circulation overview
                </p>
              </div>
              <div class="p-4">
                <div class="space-y-3">
                  <div
                    class="p-3 bg-gradient-to-r from-emerald-50 to-emerald-100 rounded-lg border border-emerald-200"
                  >
                    <div class="flex items-center justify-between">
                      <span class="text-xs font-medium text-emerald-700"
                        >Total Issued (YTD)</span
                      ><svg
                        class="w-4 h-4 text-emerald-600"
                        viewbox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                      >
                        <polyline points="23 6 13.5 15.5 8.5 10.5 1 18" />
                      </svg>
                    </div>
                    <p class="text-xl font-bold text-emerald-800 mt-1">
                      3,247,850
                    </p>
                    <p class="text-xs text-emerald-600 mt-1">
                      +245,000 this month
                    </p>
                  </div>
                  <div
                    class="p-3 bg-gradient-to-r from-indigo-50 to-indigo-100 rounded-lg border border-indigo-200"
                  >
                    <div class="flex items-center justify-between">
                      <span class="text-xs font-medium text-indigo-700"
                        >Total Redeemed (YTD)</span
                      ><svg
                        class="w-4 h-4 text-indigo-600"
                        viewbox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                      >
                        <polyline points="7 10 12 15 17 10" />
                        <line x1="12" y1="15" x2="12" y2="3" />
                      </svg>
                    </div>
                    <p class="text-xl font-bold text-indigo-800 mt-1">
                      1,892,340
                    </p>
                    <p class="text-xs text-indigo-600 mt-1">
                      +156,200 this month
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Growth Engine Chart (responsive SVG) -->
          <div class="chart-container overflow-x-auto">
            <div
              class="px-5 py-4 border-b border-slate-100 flex flex-wrap items-center justify-between gap-2"
            >
              <div>
                <h3 class="text-sm font-semibold text-slate-800">
                  Points Issued vs Points Redeemed
                </h3>
                <p class="text-xs text-slate-500 mt-0.5">
                  12-month historical trend analysis
                </p>
              </div>
              <div class="flex items-center gap-4">
                <div class="flex items-center gap-2">
                  <div class="w-3 h-3 rounded-full bg-emerald-500"></div>
                  <span class="text-xs text-slate-600">Points Issued</span>
                </div>
                <div class="flex items-center gap-2">
                  <div class="w-3 h-3 rounded-full bg-indigo-500"></div>
                  <span class="text-xs text-slate-600">Points Redeemed</span>
                </div>
              </div>
            </div>
            <div class="p-5">
              <svg
                viewbox="0 0 800 200"
                class="w-full h-auto max-h-48"
                preserveAspectRatio="xMidYMid meet"
                id="growth-chart"
              >
                <defs>
                  <lineargradient
                    id="issuedGradient"
                    x1="0%"
                    y1="0%"
                    x2="0%"
                    y2="100%"
                  >
                    <stop
                      offset="0%"
                      style="stop-color: #10b981; stop-opacity: 0.3"
                    />
                    <stop
                      offset="100%"
                      style="stop-color: #10b981; stop-opacity: 0"
                    />
                  </lineargradient>
                  <lineargradient
                    id="redeemedGradient"
                    x1="0%"
                    y1="0%"
                    x2="0%"
                    y2="100%"
                  >
                    <stop
                      offset="0%"
                      style="stop-color: #6366f1; stop-opacity: 0.3"
                    />
                    <stop
                      offset="100%"
                      style="stop-color: #6366f1; stop-opacity: 0"
                    />
                  </lineargradient>
                </defs>
                <g class="grid-lines" stroke="#e2e8f0" stroke-width="1">
                  <line
                    x1="50"
                    y1="20"
                    x2="780"
                    y2="20"
                    stroke-dasharray="4,4"
                  />
                  <line
                    x1="50"
                    y1="60"
                    x2="780"
                    y2="60"
                    stroke-dasharray="4,4"
                  />
                  <line
                    x1="50"
                    y1="100"
                    x2="780"
                    y2="100"
                    stroke-dasharray="4,4"
                  />
                  <line
                    x1="50"
                    y1="140"
                    x2="780"
                    y2="140"
                    stroke-dasharray="4,4"
                  />
                  <line x1="50" y1="180" x2="780" y2="180" />
                </g>
                <g class="y-labels" fill="#94a3b8" font-size="10">
                  <text x="40" y="24" text-anchor="end">400K</text>
                  <text x="40" y="64" text-anchor="end">300K</text>
                  <text x="40" y="104" text-anchor="end">200K</text>
                  <text x="40" y="144" text-anchor="end">100K</text>
                  <text x="40" y="184" text-anchor="end">0</text>
                </g>
                <g
                  class="x-labels"
                  fill="#94a3b8"
                  font-size="10"
                  text-anchor="middle"
                >
                  <text x="110" y="198">Jan</text>
                  <text x="170" y="198">Feb</text>
                  <text x="230" y="198">Mar</text>
                  <text x="290" y="198">Apr</text>
                  <text x="350" y="198">May</text>
                  <text x="410" y="198">Jun</text>
                  <text x="470" y="198">Jul</text>
                  <text x="530" y="198">Aug</text>
                  <text x="590" y="198">Sep</text>
                  <text x="650" y="198">Oct</text>
                  <text x="710" y="198">Nov</text>
                  <text x="770" y="198">Dec</text>
                </g>
                <path
                  d="M110,100 L170,85 L230,70 L290,80 L350,60 L410,50 L470,45 L530,55 L590,40 L650,35 L710,30 L770,25 L770,180 L110,180 Z"
                  fill="url(#issuedGradient)"
                />
                <path
                  d="M110,140 L170,130 L230,120 L290,125 L350,110 L410,100 L470,95 L530,105 L590,90 L650,85 L710,80 L770,75 L770,180 L110,180 Z"
                  fill="url(#redeemedGradient)"
                />
                <path
                  d="M110,100 L170,85 L230,70 L290,80 L350,60 L410,50 L470,45 L530,55 L590,40 L650,35 L710,30 L770,25"
                  fill="none"
                  stroke="#10b981"
                  stroke-width="2.5"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
                <path
                  d="M110,140 L170,130 L230,120 L290,125 L350,110 L410,100 L470,95 L530,105 L590,90 L650,85 L710,80 L770,75"
                  fill="none"
                  stroke="#6366f1"
                  stroke-width="2.5"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
                <g class="issued-points" fill="#10b981">
                  <circle cx="110" cy="100" r="4" />
                  <circle cx="170" cy="85" r="4" />
                  <circle cx="230" cy="70" r="4" />
                  <circle cx="290" cy="80" r="4" />
                  <circle cx="350" cy="60" r="4" />
                  <circle cx="410" cy="50" r="4" />
                  <circle cx="470" cy="45" r="4" />
                  <circle cx="530" cy="55" r="4" />
                  <circle cx="590" cy="40" r="4" />
                  <circle cx="650" cy="35" r="4" />
                  <circle cx="710" cy="30" r="4" />
                  <circle cx="770" cy="25" r="4" />
                </g>
                <g class="redeemed-points" fill="#6366f1">
                  <circle cx="110" cy="140" r="4" />
                  <circle cx="170" cy="130" r="4" />
                  <circle cx="230" cy="120" r="4" />
                  <circle cx="290" cy="125" r="4" />
                  <circle cx="350" cy="110" r="4" />
                  <circle cx="410" cy="100" r="4" />
                  <circle cx="470" cy="95" r="4" />
                  <circle cx="530" cy="105" r="4" />
                  <circle cx="590" cy="90" r="4" />
                  <circle cx="650" cy="85" r="4" />
                  <circle cx="710" cy="80" r="4" />
                  <circle cx="770" cy="75" r="4" />
                </g>
              </svg>
            </div>
          </div>
        </div>
      </main>
    </div>

    <script>
      // ---------- FUNCTION TO CREATE REALISTIC BAR GRAPHS ----------
      function createBarGraph(containerId, basePattern) {
        const container = document.getElementById(containerId);
        if (!container) return;

        // Clear existing bars
        container.innerHTML = "";

        // Define colors for each card type
        const colors = {
          "members-bars": "#6366f1",
          "active-bars": "#06b6d4",
          "points-bars": "#10b981",
          "channels-bars": "#8b5cf6",
          "revenue-bars": "#f59e0b",
        };

        // Create 10 bars with different heights to simulate real data
        for (let i = 0; i < 10; i++) {
          const bar = document.createElement("div");
          bar.className = "bar-graph-item";

          // Use the base pattern to create realistic up-and-down variations
          let height;
          if (basePattern === "members") {
            // Members: Gradual growth with some fluctuations
            const patterns = [0.4, 0.6, 0.5, 0.7, 0.9, 0.8, 1.0, 0.9, 1.0, 0.8];
            height = patterns[i];
          } else if (basePattern === "active") {
            // Active: Steady with occasional dips
            const patterns = [0.7, 0.8, 0.6, 0.9, 0.8, 1.0, 0.7, 0.9, 0.8, 0.6];
            height = patterns[i];
          } else if (basePattern === "points") {
            // Points: Increasing trend
            const patterns = [0.3, 0.5, 0.4, 0.6, 0.8, 0.7, 0.9, 1.0, 0.9, 0.7];
            height = patterns[i];
          } else if (basePattern === "channels") {
            // Channels: More varied, like channel performance
            const patterns = [0.9, 0.5, 0.8, 0.4, 0.7, 0.3, 0.6, 0.8, 0.5, 0.9];
            height = patterns[i];
          } else {
            // Revenue: Peaks and valleys like sales data
            const patterns = [0.5, 0.7, 0.9, 0.6, 0.8, 1.0, 0.7, 0.5, 0.8, 0.6];
            height = patterns[i];
          }

          bar.style.setProperty("--bar-height", height);
          bar.style.backgroundColor = colors[containerId];
          container.appendChild(bar);
        }
      }

      // ---------- ORIGINAL JAVASCRIPT – UPDATED WITH ACTIVE MEMBERS ----------
      const defaultConfig = {
        company_name: "goFides",
        dashboard_title: "Executive Dashboard",
        background_color: "#f8fafc",
        surface_color: "#ffffff",
        text_color: "#1e293b",
        primary_action_color: "#4f46e5",
        secondary_action_color: "#10b981",
      };
      let config = { ...defaultConfig };

      function toggleSubmenu(id) {
        const submenu = document.getElementById(id);
        const chevronId = id.replace("-submenu", "-chevron");
        const chevron = document.getElementById(chevronId);
        if (submenu) {
          submenu.classList.toggle("hidden");
          if (chevron) {
            chevron.style.transform = submenu.classList.contains("hidden")
              ? "rotate(0deg)"
              : "rotate(180deg)";
          }
        }
      }

      const timeToggle = document.getElementById("time-toggle");
      if (timeToggle) {
        timeToggle.addEventListener("click", (e) => {
          if (e.target.classList.contains("time-toggle-btn")) {
            document
              .querySelectorAll(".time-toggle-btn")
              .forEach((btn) => btn.classList.remove("active"));
            e.target.classList.add("active");
            updateDataForPeriod(e.target.dataset.period);
          }
        });
      }

      function updateDataForPeriod(period) {
        const data = {
          daily: {
            members: "847",
            points: "125K",
            channels: "12",
            revenue: "$28K",
            activeMembers: "612",
          },
          monthly: {
            members: "24,847",
            points: "3.2M",
            channels: "12",
            revenue: "$847K",
            activeMembers: "16,912",
          },
          ytd: {
            members: "24,847",
            points: "38.5M",
            channels: "12",
            revenue: "$10.2M",
            activeMembers: "62,847",
          },
        };
        const periodData = data[period];
        if (periodData) {
          document.getElementById("kpi-members").textContent =
            periodData.members;
          document.getElementById("kpi-points").textContent = periodData.points;
          document.getElementById("kpi-channels").textContent =
            periodData.channels;
          document.getElementById("kpi-revenue").textContent =
            periodData.revenue;
          // Update Active Members
          const activeMembersElement =
            document.getElementById("kpi-active-members");
          if (activeMembersElement) {
            activeMembersElement.textContent = periodData.activeMembers;
          }
        }
      }

      async function onConfigChange(newConfig) {
        const companyName = document.getElementById("company-name");
        const dashboardTitle = document.getElementById("dashboard-title");
        if (companyName) {
          companyName.textContent =
            newConfig.company_name || defaultConfig.company_name;
        }
        if (dashboardTitle) {
          dashboardTitle.textContent =
            newConfig.dashboard_title || defaultConfig.dashboard_title;
        }
        document.body.style.backgroundColor =
          newConfig.background_color || defaultConfig.background_color;
        document
          .querySelectorAll(".kpi-card, .chart-container")
          .forEach((el) => {
            el.style.backgroundColor =
              newConfig.surface_color || defaultConfig.surface_color;
          });
      }

      function mapToCapabilities(config) {
        return {
          recolorables: [
            {
              get: () =>
                config.background_color || defaultConfig.background_color,
              set: (value) => {
                config.background_color = value;
                window.elementSdk.setConfig({ background_color: value });
              },
            },
            {
              get: () => config.surface_color || defaultConfig.surface_color,
              set: (value) => {
                config.surface_color = value;
                window.elementSdk.setConfig({ surface_color: value });
              },
            },
            {
              get: () => config.text_color || defaultConfig.text_color,
              set: (value) => {
                config.text_color = value;
                window.elementSdk.setConfig({ text_color: value });
              },
            },
            {
              get: () =>
                config.primary_action_color ||
                defaultConfig.primary_action_color,
              set: (value) => {
                config.primary_action_color = value;
                window.elementSdk.setConfig({ primary_action_color: value });
              },
            },
            {
              get: () =>
                config.secondary_action_color ||
                defaultConfig.secondary_action_color,
              set: (value) => {
                config.secondary_action_color = value;
                window.elementSdk.setConfig({ secondary_action_color: value });
              },
            },
          ],
          borderables: [],
          fontEditable: undefined,
          fontSizeable: undefined,
        };
      }

      function mapToEditPanelValues(config) {
        return new Map([
          ["company_name", config.company_name || defaultConfig.company_name],
          [
            "dashboard_title",
            config.dashboard_title || defaultConfig.dashboard_title,
          ],
        ]);
      }

      // ---------- MOBILE DRAWER CONTROLLERS ----------
      const sidebar = document.getElementById("mainSidebar");
      const overlay = document.getElementById("drawerOverlay");

      window.openSidebar = function () {
        if (window.innerWidth < 1024) {
          // only mobile
          sidebar.classList.add("drawer-open");
          overlay.classList.add("active");
          document.body.style.overflow = "hidden"; // prevent background scroll
        }
      };

      window.closeSidebar = function () {
        sidebar.classList.remove("drawer-open");
        overlay.classList.remove("active");
        document.body.style.overflow = ""; // restore scrolling
      };

      // close sidebar on window resize if switching to desktop
      window.addEventListener("resize", function () {
        if (window.innerWidth >= 1024) {
          // desktop: ensure sidebar visible and no overlay
          sidebar.classList.remove("drawer-open");
          overlay.classList.remove("active");
          document.body.style.overflow = "";
        } else {
          // on mobile, ensure drawer starts closed
          sidebar.classList.remove("drawer-open");
          overlay.classList.remove("active");
          document.body.style.overflow = "";
        }
      });

      // ensure initial state: sidebar closed on mobile, open on desktop (via CSS default transform)
      window.addEventListener("DOMContentLoaded", function () {
        if (window.innerWidth < 1024) {
          sidebar.classList.remove("drawer-open");
          overlay.classList.remove("active");
          document.body.style.overflow = "";
        }

        // Initialize all bar graphs
        createBarGraph("members-bars", "members");
        createBarGraph("active-bars", "active");
        createBarGraph("points-bars", "points");
        createBarGraph("channels-bars", "channels");
        createBarGraph("revenue-bars", "revenue");
      });

      if (window.elementSdk) {
        window.elementSdk.init({
          defaultConfig,
          onConfigChange,
          mapToCapabilities,
          mapToEditPanelValues,
        });
      }
    </script>
    <script>
      (function () {
        function c() {
          var b = a.contentDocument || a.contentWindow.document;
          if (b) {
            var d = b.createElement("script");
            d.innerHTML =
              "window.__CF$cv$params={r:'9ccb53d243964b75',t:'MTc3MDg5MTM1NC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";
            b.getElementsByTagName("head")[0].appendChild(d);
          }
        }
        if (document.body) {
          var a = document.createElement("iframe");
          a.height = 1;
          a.width = 1;
          a.style.position = "absolute";
          a.style.top = 0;
          a.style.left = 0;
          a.style.border = "none";
          a.style.visibility = "hidden";
          document.body.appendChild(a);
          if ("loading" !== document.readyState) c();
          else if (window.addEventListener)
            document.addEventListener("DOMContentLoaded", c);
          else {
            var e = document.onreadystatechange || function () {};
            document.onreadystatechange = function (b) {
              e(b);
              "loading" !== document.readyState &&
                ((document.onreadystatechange = e), c());
            };
          }
        }
      })();
    </script>
  </body>
</html>
